{"version":3,"sources":["./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-collection-matmenu/auth-collection-matmenu.component.html","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-editor-options/auth-editor-options.component.html","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-table-of-contents/auth-table-of-contents.component.html","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-table-tree-label/auth-table-tree-label.component.html","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-toc/auth-toc.component.html","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/collection/collection.component.html","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/course-collection/course-collection.component.html","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/course-header/course-header.component.html","./project/ws/author/src/lib/constants/depth-rule.ts","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/collection-routing.module.ts","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/collection.module.ts","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-collection-matmenu/auth-collection-matmenu.component.scss","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-collection-matmenu/auth-collection-matmenu.component.ts","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-editor-options/auth-editor-options.component.scss","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-editor-options/auth-editor-options.component.ts","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-table-of-contents/auth-table-of-contents.component.scss","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-table-of-contents/auth-table-of-contents.component.ts","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-table-tree-label/auth-table-tree-label.component.scss","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-table-tree-label/auth-table-tree-label.component.ts","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-toc/auth-toc.component.scss","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/auth-toc/auth-toc.component.ts","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/collection/collection.component.scss","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/collection/collection.component.ts","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/course-collection/course-collection.component.scss","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/course-collection/course-collection.component.ts","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/course-header/course-header.component.scss","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/components/course-header/course-header.component.ts","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/services/resolver.service.ts","./project/ws/author/src/lib/routing/modules/editor/routing/modules/collection/services/store.service.ts"],"names":[],"mappings":"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","file":"routing-modules-collection-collection-module-es2015.js","sourcesContent":["export default \"<mat-menu #childMenu=\\\"matMenu\\\">\\n\\n  <ng-container *ngFor=\\\"let option of childType\\\">\\n\\n\\n    <button\\n    *ngIf=\\\"option.children && option.children.length\\\"\\n    mat-menu-item\\n    (click)=\\\"click(type, option.id)\\\"\\n      [matMenuTriggerFor]=\\\"child.childMenu\\\"\\n      >\\n      <mat-icon aria-hidden=\\\"false\\\" class=\\\"node-icon ws-mat-primary-text\\\">{{\\n        option.icon\\n      }}</mat-icon>\\n      <ng-container>{{ option.name }}</ng-container>\\n      <ws-auth-collection-matmenu\\n      [type]=\\\"type\\\"\\n      [childType]=\\\"option.children\\\"\\n      (action)=\\\"click($event.action, $event.type)\\\"\\n      #child\\n      ></ws-auth-collection-matmenu>\\n    </button>\\n    <button\\n    *ngIf=\\\"!option.children || !option.children.length\\\"\\n     mat-menu-item\\n     (click)=\\\"click(type, option.id)\\\"\\n     >\\n      <mat-icon aria-hidden=\\\"false\\\" class=\\\"node-icon ws-mat-primary-text\\\">{{\\n        option.icon\\n      }}</mat-icon>\\n      <ng-container>{{ option.name }}</ng-container>\\n    </button>\\n\\n  </ng-container>\\n  <button (click)=\\\"click('delete')\\\"  mat-menu-item>\\n    <mat-icon aria-hidden=\\\"false\\\" class=\\\"node-icon ws-mat-primary-text\\\" i18n-aria-label aria-label=\\\"Delete content\\\">\\n      delete</mat-icon>\\n    <ng-container i18n>Delete</ng-container>\\n    </button>\\n</mat-menu>\\n\"","export default \"<!-- <mat-icon aria-hidden=\\\"false\\\" class=\\\"menu-icon ws-mat-primary-text\\\" [class.ws-mat-warn-text]=\\\"isInvalid\\\"\\n  [class.ws-mat-primary-text]=\\\"!isInvalid\\\" [matMenuTriggerFor]=\\\"menu\\\" (click)=\\\"$event.stopPropagation()\\\" i18n-aria-label\\n  aria-label=\\\"Menu for content\\\">more_vert</mat-icon> -->\\n\\n  <button [hidden]=\\\"!allowedChild.length\\\" [class.op500]=\\\"!allowedChild.length\\\" mat-menu-item\\n    [matMenuTriggerFor]=\\\"child.childMenu\\\">\\n    <mat-icon aria-hidden=\\\"false\\\" class=\\\"node-icon ws-mat-primary-text\\\" i18n-aria-label aria-label=\\\"Create New Child\\\">\\n      more_vert</mat-icon>\\n    <!-- <ng-container i18n>Create New Child</ng-container> -->\\n    <ws-auth-collection-matmenu [type]=\\\"'createChild'\\\" [childType]=\\\"allowedChild\\\"\\n      (action)=\\\"click($event.action, $event.type)\\\" #child></ws-auth-collection-matmenu>\\n      <button (click)=\\\"click('delete')\\\" [disabled]=\\\"!node.parentId && node.editable\\\"\\n      [class.op500]=\\\"!node.parentId && node.editable\\\" mat-menu-item>\\n      <mat-icon aria-hidden=\\\"false\\\" class=\\\"node-icon ws-mat-primary-text\\\" i18n-aria-label aria-label=\\\"Delete content\\\">\\n        </mat-icon>\\n    </button>\\n  </button>\\n  <button *ngIf=\\\"node.category === 'Resource'\\\" [class.op500]=\\\"!canEdit\\\" [matMenuTriggerFor]=\\\"edit\\\" mat-menu-item\\n    [disabled]=\\\"!canEdit || (metaEditDisabled && contentEditDisabled)\\\">\\n    <mat-icon aria-hidden=\\\"false\\\" class=\\\"node-icon ws-mat-primary-text\\\" i18n-aria-label aria-label=\\\"Edit content\\\"> more_vert\\n    </mat-icon>\\n    <!-- <ng-container i18n>Edit</ng-container> -->\\n  </button>\\n\\n\\n<!-- <mat-menu #menu=\\\"matMenu\\\"> -->\\n  <!--\\n  <button *ngIf=\\\"node.category === 'Resource'\\\" mat-menu-item (click)=\\\"click('preview')\\\">\\n    <mat-icon aria-hidden=\\\"false\\\" class=\\\"node-icon ws-mat-primary-text\\\" i18n-aria-label aria-label=\\\"Preview\\\">\\n      remove_red_eye</mat-icon>\\n    <ng-container i18n>Preview</ng-container>\\n  </button>-->\\n  <!-- <button (click)=\\\"click('delete')\\\" [disabled]=\\\"!node.parentId && node.editable\\\"\\n    [class.op500]=\\\"!node.parentId && node.editable\\\" mat-menu-item>\\n    <mat-icon aria-hidden=\\\"false\\\" class=\\\"node-icon ws-mat-primary-text\\\" i18n-aria-label aria-label=\\\"Delete content\\\">\\n      delete</mat-icon>\\n    <ng-container i18n>Delete</ng-container>\\n  </button>  -->\\n  <!-- <button [matMenuTriggerFor]=\\\"sibling.childMenu\\\" [disabled]=\\\"!node.parentId || !allowedSibling.length\\\"\\n    [class.op500]=\\\"!node.parentId || !allowedSibling.length\\\" mat-menu-item>\\n    <mat-icon aria-hidden=\\\"false\\\" class=\\\"node-icon ws-mat-primary-text\\\" i18n-aria-label aria-label=\\\"Create New Sibling\\\">\\n      next_week</mat-icon>\\n    <ng-container i18n>Create New Sibling</ng-container>\\n    <ws-auth-collection-matmenu [type]=\\\"'createSibling'\\\" [childType]=\\\"allowedSibling\\\"\\n      (action)=\\\"click($event.action, $event.type)\\\" #sibling></ws-auth-collection-matmenu>\\n  </button> -->\\n\\n  <!-- <button *ngIf=\\\"node.category !== 'Resource'\\\" [disabled]=\\\"!canEdit || contentEditDisabled\\\"\\n    [class.op500]=\\\"!canEdit || contentEditDisabled\\\" mat-menu-item (click)=\\\"click('addChild')\\\">\\n    <mat-icon aria-hidden=\\\"false\\\" class=\\\"node-icon ws-mat-primary-text\\\" i18n-aria-label aria-label=\\\"Add a Child\\\">\\n      library_add</mat-icon>\\n    <ng-container i18n>Add a Child</ng-container>\\n  </button> -->\\n<!-- </mat-menu> -->\\n\\n<mat-menu #edit=\\\"matMenu\\\">\\n  <!-- <button [disabled]=\\\"contentEditDisabled\\\" [class.op500]=\\\"contentEditDisabled\\\" mat-menu-item\\n    (click)=\\\"click('editContent')\\\">\\n    <mat-icon aria-hidden=\\\"false\\\" class=\\\"node-icon ws-mat-primary-text\\\" i18n-aria-label aria-label=\\\"Edit content\\\">build\\n    </mat-icon>\\n    <ng-container i18n>Edit Content</ng-container>\\n  </button>\\n  <button mat-menu-item [disabled]=\\\"metaEditDisabled\\\" [class.op500]=\\\"metaEditDisabled\\\" (click)=\\\"click('editMeta')\\\">\\n    <mat-icon aria-hidden=\\\"false\\\" class=\\\"node-icon ws-mat-primary-text\\\" i18n-aria-label aria-label=\\\"Edit content\\\">ballot\\n    </mat-icon>\\n    <ng-container i18n>Edit Meta</ng-container>\\n  </button> -->\\n  <button *ngIf=\\\"node.category === 'Resource'\\\" mat-menu-item (click)=\\\"click('preview')\\\">\\n    <mat-icon aria-hidden=\\\"false\\\" class=\\\"node-icon ws-mat-primary-text\\\" i18n-aria-label aria-label=\\\"Preview\\\">\\n      remove_red_eye</mat-icon>\\n    <ng-container i18n>Preview</ng-container>\\n  </button>\\n  <button (click)=\\\"click('delete')\\\" [disabled]=\\\"!node.parentId && node.editable\\\"\\n    [class.op500]=\\\"!node.parentId && node.editable\\\" mat-menu-item>\\n    <mat-icon aria-hidden=\\\"false\\\" class=\\\"node-icon ws-mat-primary-text\\\" i18n-aria-label aria-label=\\\"Delete content\\\">\\n      delete</mat-icon>\\n    <ng-container i18n>Delete</ng-container>\\n  </button>\\n</mat-menu>\\n\"","export default \"<div class=\\\"flex\\\">\\n  <ng-container *ngIf=\\\"!mediumScreen\\\">\\n    <div *ngIf=\\\"!menubtn\\\" class=\\\"p-2 pt-4 transitionD\\\">\\n      <button\\n        mat-icon-button\\n        (click)=\\\"drawer = !drawer; menubtn = !menubtn\\\"\\n        i18n-aria-label\\n        aria-label=\\\"Maximize side panel\\\"\\n        i18n-matTooltip\\n        matTooltipPosition=\\\"right\\\"\\n        matTooltip=\\\"Open side panel\\\"\\n      >\\n        <mat-icon>menu</mat-icon>\\n      </button>\\n    </div>\\n  </ng-container>\\n  <div *ngIf=\\\"drawer\\\" class=\\\"transitionD\\\">\\n    <mat-card class=\\\"flex items-center mat-card custom-card\\\">\\n      <h2 class=\\\"flex mat-h w-full justify-center pt-5\\\" i18n>\\n        TABLE OF CONTENTS\\n      </h2>\\n\\n      <button\\n        *ngIf=\\\"!mediumScreen\\\"\\n        mat-icon-button\\n        (click)=\\\"drawer = !drawer; menubtn = !menubtn\\\"\\n        i18n-aria-label\\n        aria-label=\\\"Open side panel\\\"\\n        i18n-matTooltip\\n        matTooltipPosition=\\\"right\\\"\\n        matTooltip=\\\"Minimize side panel\\\"\\n      >\\n        <mat-icon>chevron_left</mat-icon>\\n      </button>\\n      <button\\n        *ngIf=\\\"mediumScreen\\\"\\n        mat-icon-button\\n        (click)=\\\"closeSidenav()\\\"\\n        i18n-aria-label\\n        aria-label=\\\"Close side panel\\\"\\n        i18n-matTooltip\\n        matTooltipPosition=\\\"right\\\"\\n        matTooltip=\\\"Close side panel\\\"\\n      >\\n        <mat-icon>keyboard_arrow_left</mat-icon>\\n      </button>\\n      <hr />\\n    </mat-card>\\n    <mat-tree\\n      [dataSource]=\\\"dataSource\\\"\\n      [treeControl]=\\\"treeControl\\\"\\n      cdkDropList\\n      cdkDropListSortingDisabled\\n      (cdkDropListDropped)=\\\"drop()\\\"\\n      class=\\\"px-2\\\"\\n    >\\n      <mat-tree-node\\n        class=\\\"auth-tree-node\\\"\\n        [class.selected]=\\\"node.id === selectedNode\\\"\\n        [class.ws-mat-warn-text]=\\\"invalidIds.includes(node.id)\\\"\\n        [matTreeNodePaddingIndent]=\\\"20\\\"\\n        *matTreeNodeDef=\\\"let node\\\"\\n        matTreeNodePadding\\n        cdkDrag=\\\"node.parent?.length && node.editable\\\"\\n        [cdkDragData]=\\\"node\\\"\\n        (mousemove)=\\\"dragHover(node, $event)\\\"\\n        (mouseleave)=\\\"dragHoverEnd($event)\\\"\\n        (cdkDragStarted)=\\\"dragStart(node)\\\"\\n        (cdkDragReleased)=\\\"dragEnd()\\\"\\n        (click)=\\\"onNodeSelect(node)\\\"\\n      >\\n        <div\\n          *ngIf=\\\"draggingPosition === 'above' && node === dropContainer && node.parentId\\\"\\n          class=\\\"placeholder\\\"\\n        >\\n          <span class=\\\"dot\\\"></span>\\n          <span class=\\\"line\\\"></span>\\n        </div>\\n        <button\\n          *ngIf=\\\"node.expandable\\\"\\n          mat-icon-button\\n          matTreeNodeToggle\\n          [attr.aria-label]=\\\"'toggle ' + node.name\\\"\\n        >\\n          <mat-icon\\n            class=\\\"mat-icon-rtl-mirror\\\"\\n            [class.ws-mat-warn-text]=\\\"invalidIds.includes(node.id)\\\"\\n            [class.ws-mat-primary-text]=\\\"!invalidIds.includes(node.id)\\\"\\n          >\\n            {{ treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right' }}\\n          </mat-icon>\\n        </button>\\n        <button *ngIf=\\\"!node.expandable\\\" mat-icon-button disabled></button>\\n        <ws-auth-table-tree-label\\n          [isInvalid]=\\\"invalidIds.includes(node.id)\\\"\\n          [identifier]=\\\"node.identifier\\\"\\n          [isDragging]=\\\"isDragging\\\"\\n          [id]=\\\"node.id\\\"\\n        ></ws-auth-table-tree-label>\\n        <ws-auth-editor-options\\n          *ngIf=\\\"node.editable\\\"\\n          [isInvalid]=\\\"invalidIds.includes(node.id)\\\"\\n          (action)=\\\"takeAction($event.action, node, $event.type)\\\"\\n          [node]=\\\"node\\\"\\n        ></ws-auth-editor-options>\\n        <div *cdkDragPreview>\\n          <ws-auth-table-tree-label\\n            [identifier]=\\\"node.identifier\\\"\\n            [isDragging]=\\\"isDragging\\\"\\n            [icon]=\\\"\\n              isDropDisabled\\n                ? 'block'\\n                : !isDropDisabled && draggingPosition === 'center'\\n                ? 'add_circle'\\n                : 'format_indent_increase'\\n            \\\"\\n            [id]=\\\"node.id\\\"\\n          ></ws-auth-table-tree-label>\\n        </div>\\n        <div\\n          *ngIf=\\\"draggingPosition === 'below' && node === dropContainer && node.parentId\\\"\\n          class=\\\"placeholder second\\\"\\n        >\\n          <span class=\\\"dot\\\"></span>\\n          <span class=\\\"line\\\"></span>\\n        </div>\\n      </mat-tree-node>\\n    </mat-tree>\\n  </div>\\n</div>\\n\"","export default \"<div>\\n  <mat-icon\\n    class=\\\"node-icon\\\"\\n    [class.ws-mat-warn-text]=\\\"isInvalid\\\"\\n    [class.ws-mat-primary-text]=\\\"!isInvalid\\\"\\n    aria-hidden=\\\"false\\\"\\n    i18n-aria-label\\n    aria-label=\\\"icon\\\"\\n    >{{ icon }}</mat-icon\\n  >\\n  <span\\n    [matTooltipDisabled]=\\\"name?.length < 25 || isDragging\\\"\\n    [matTooltip]=\\\"name\\\"\\n    class=\\\"node-name\\\"\\n  >\\n    <ng-container *ngIf=\\\"name\\\">{{\\n      name.length > 25 ? name.slice(0, 22) + '...' : name\\n    }}</ng-container>\\n    <ng-container i18n *ngIf=\\\"!name\\\">Untitled Content</ng-container>\\n  </span>\\n</div>\\n\"","export default \"<div class=\\\"flex\\\">\\n  <ng-container *ngIf=\\\"!mediumScreen\\\">\\n    <div *ngIf=\\\"!menubtn\\\" class=\\\"p-2 pt-4 transitionD\\\">\\n      <button mat-icon-button (click)=\\\"drawer = !drawer; menubtn = !menubtn\\\" i18n-aria-label\\n        aria-label=\\\"Maximize side panel\\\" i18n-matTooltip matTooltipPosition=\\\"right\\\" matTooltip=\\\"Open side panel\\\">\\n        <mat-icon>menu</mat-icon>\\n      </button>\\n    </div>\\n  </ng-container>\\n  <div *ngIf=\\\"drawer\\\" class=\\\"transitionD\\\">\\n\\n    <mat-tree [dataSource]=\\\"dataSource\\\" [treeControl]=\\\"treeControl\\\" cdkDropList cdkDropListSortingDisabled\\n      (cdkDropListDropped)=\\\"drop()\\\" class=\\\"px-2\\\">\\n      <mat-tree-node class=\\\"auth-tree-node\\\" [class.selected]=\\\"node.id === selectedNode\\\"\\n        [class.ws-mat-warn-text]=\\\"invalidIds.includes(node.id)\\\" [matTreeNodePaddingIndent]=\\\"20\\\"\\n        *matTreeNodeDef=\\\"let node\\\" matTreeNodePadding cdkDrag=\\\"node.parent?.length && node.editable\\\"\\n        [cdkDragData]=\\\"node\\\" (mousemove)=\\\"dragHover(node, $event)\\\" (mouseleave)=\\\"dragHoverEnd($event)\\\"\\n        (cdkDragStarted)=\\\"dragStart(node)\\\" (cdkDragReleased)=\\\"dragEnd()\\\" (click)=\\\"onNodeSelect(node)\\\">\\n        <div *ngIf=\\\"draggingPosition === 'above' && node === dropContainer && node.parentId\\\" class=\\\"placeholder\\\">\\n          <span class=\\\"dot\\\"></span>\\n          <span class=\\\"line\\\"></span>\\n        </div>\\n        <button *ngIf=\\\"node.expandable\\\" mat-icon-button matTreeNodeToggle [attr.aria-label]=\\\"'toggle ' + node.name\\\">\\n          <mat-icon class=\\\"mat-icon-rtl-mirror\\\" [class.ws-mat-warn-text]=\\\"invalidIds.includes(node.id)\\\"\\n            [class.ws-mat-primary-text]=\\\"!invalidIds.includes(node.id)\\\">\\n            {{ treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right' }}\\n          </mat-icon>\\n        </button>\\n        <button *ngIf=\\\"!node.expandable\\\" mat-icon-button disabled></button>\\n        <ws-auth-table-tree-label class=\\\"tree-label\\\" [isInvalid]=\\\"invalidIds.includes(node.id)\\\" [identifier]=\\\"node.identifier\\\"\\n          [isDragging]=\\\"isDragging\\\" [id]=\\\"node.id\\\"></ws-auth-table-tree-label>\\n\\n        <ws-auth-editor-options  class=\\\"editor-options\\\" *ngIf=\\\"node.editable\\\" [isInvalid]=\\\"invalidIds.includes(node.id)\\\"\\n          (action)=\\\"takeAction($event.action, node, $event.type)\\\" [node]=\\\"node\\\"></ws-auth-editor-options>\\n        <div *cdkDragPreview>\\n          <ws-auth-table-tree-label [identifier]=\\\"node.identifier\\\" [isDragging]=\\\"isDragging\\\" [icon]=\\\"\\n              isDropDisabled\\n                ? 'block'\\n                : !isDropDisabled && draggingPosition === 'center'\\n                ? 'add_circle'\\n                : 'format_indent_increase'\\n            \\\" [id]=\\\"node.id\\\"></ws-auth-table-tree-label>\\n        </div>\\n        <div *ngIf=\\\"draggingPosition === 'below' && node === dropContainer && node.parentId\\\" class=\\\"placeholder second\\\">\\n          <span class=\\\"dot\\\"></span>\\n          <span class=\\\"line\\\"></span>\\n        </div>\\n      </mat-tree-node>\\n    </mat-tree>\\n  </div>\\n</div>\\n\"","export default \"<ng-container *ngIf=\\\"!previewIdentifier\\\">\\n  <ws-auth-editor-action-buttons (action)=\\\"action($event)\\\" [buttonConfig]=\\\"actionButton\\\">\\n  </ws-auth-editor-action-buttons>\\n  <ws-auth-editor-steps\\n    [steps]=\\\"stepper\\\"\\n    [currentStep]=\\\"currentStep\\\"\\n    (change)=\\\"currentStep = $event\\\"\\n  >\\n  </ws-auth-editor-steps>\\n  <div *ngIf=\\\"mediumScreen\\\">\\n    <div class=\\\"ui\\\" [ngClass]=\\\"{ toHide: !leftArrow }\\\">\\n      <button\\n        class=\\\"p-1\\\"\\n        mat-icon-button\\n        (click)=\\\"sidenav.toggle(); leftArrow = !leftArrow\\\"\\n        i18n-aria-label\\n        aria-label=\\\"Open side panel\\\"\\n        i18n-matTooltip\\n        matTooltipPosition=\\\"right\\\"\\n        matTooltip=\\\"Open side panel\\\"\\n      >\\n        <mat-icon>keyboard_arrow_right</mat-icon>\\n      </button>\\n    </div>\\n  </div>\\n  <mat-sidenav-container autosize=\\\"true\\\" id=\\\"auth-toc\\\" class=\\\"example-container\\\">\\n    <mat-sidenav\\n      #sidenav\\n      [mode]=\\\"mode$ | async\\\"\\n      [(opened)]=\\\"sideBarOpened\\\"\\n      (closedStart)=\\\"sidenavClose()\\\"\\n    >\\n      <div class=\\\"sticky\\\">\\n        <ws-auth-table-of-contents\\n          (action)=\\\"subAction($event)\\\"\\n          (closeEvent)=\\\"sidenav.toggle(); leftArrow = !leftArrow\\\"\\n        ></ws-auth-table-of-contents>\\n      </div>\\n    </mat-sidenav>\\n\\n    <mat-sidenav-content class=\\\"pl-6 pr-6 ml-6\\\">\\n      <div>\\n        <ws-auth-edit-meta\\n          [parentContent]=\\\"currentParentId\\\"\\n          [class.hidden]=\\\"viewMode !== 'meta'\\\"\\n          [isSubmitPressed]=\\\"isSubmitPressed\\\"\\n          (data)=\\\"action($event)\\\"\\n        ></ws-auth-edit-meta>\\n        <ws-auth-url-upload\\n          [isCollectionEditor]=\\\"true\\\"\\n          *ngIf=\\\"viewMode === 'curate'\\\"\\n          [isSubmitPressed]=\\\"isSubmitPressed\\\"\\n          (data)=\\\"action($event)\\\"\\n        ></ws-auth-url-upload>\\n        <ws-auth-file-upload\\n          [isCollectionEditor]=\\\"true\\\"\\n          *ngIf=\\\"viewMode === 'upload'\\\"\\n          [isSubmitPressed]=\\\"isSubmitPressed\\\"\\n          (data)=\\\"action($event)\\\"\\n        >\\n        </ws-auth-file-upload>\\n      </div>\\n    </mat-sidenav-content>\\n  </mat-sidenav-container>\\n</ng-container>\\n<div *ngIf=\\\"previewIdentifier\\\">\\n  <mat-icon\\n    (click)=\\\"closePreview()\\\"\\n    class=\\\"close-preview\\\"\\n    matTooltip=\\\"Back\\\"\\n    i18n-matTooltip=\\\"Back button to go to previous page\\\"\\n  >\\n    arrow_back</mat-icon\\n  >\\n  <ws-auth-viewer [identifier]=\\\"previewIdentifier\\\" [mimeTypeRoute]=\\\"mimeTypeRoute\\\"></ws-auth-viewer>\\n</div>\\n\"","export default \"<ws-author-course-header [buttonConfig]=\\\"actionButton\\\" (action)=\\\"action($event)\\\" (subAction)=\\\"subAction($event)\\\">\\n</ws-author-course-header>\\n\\n<mat-drawer-container autosize=\\\"true\\\" id=\\\"auth-toc\\\" class=\\\"example-container\\\">\\n  <mat-drawer mode=\\\"side\\\" [(opened)]=\\\"sideBarOpened\\\">\\n\\n    <div class=\\\"sticky\\\">\\n      <!-- (closeEvent)=\\\"sidenav.toggle(); leftArrow = !leftArrow\\\" check on this -->\\n\\n      <ws-author-auth-toc (action)=\\\"subAction($event)\\\" [createdFromCourse]=\\\"couseCreated\\\">\\n      </ws-author-auth-toc>\\n\\n      <div class=\\\"margin-left-l margin-top-m \\\">\\n        <a class=\\\"flex flex-middle margin-left-l\\\" (click)=\\\"showAddchapter = true\\\"><span class=\\\"material-icons\\\">\\n            add\\n          </span>\\n          <p class=\\\"margin-left-xs margin-remove-bottom cursor-pointer\\\">Add Content</p>\\n        </a>\\n\\n\\n      </div>\\n\\n    </div>\\n\\n  </mat-drawer>\\n  <mat-drawer-content>\\n\\n\\n\\n    <mat-sidenav-container class=\\\"nav-container\\\">\\n\\n\\n      <form [formGroup]=\\\"createTopicForm\\\" *ngIf=\\\"showAddchapter\\\" class=\\\"margin-left-l\\\">\\n        <div class=\\\"margin-top-s\\\">\\n          <h1>Build your course by adding Topics</h1>\\n          <p>Add your content, quizzes, discussions and publish</p>\\n          <p class=\\\"required margin-remove-bottom\\\">\\n            Hi, Lets start with a Topic name\\n          </p>\\n          <div class=\\\"margin-top-xs width-3-5\\\">\\n            <mat-form-field appearance=\\\"outline\\\" class=\\\"margin-top-xs width-1-4\\\">\\n              <input matInput i18n-placeholder placeholder=\\\"Topic Name\\\" formControlName=\\\"topicName\\\" />\\n            </mat-form-field>\\n          </div>\\n          <div class=\\\"margin-top-xs width-3-5\\\">\\n            <mat-form-field appearance=\\\"outline\\\" class=\\\"margin-top-xs width-1-4\\\">\\n              <textarea matInput i18n-placeholder placeholder=\\\"Topic Description\\\" formControlName=\\\"topicDescription\\\">\\n            </textarea>\\n            </mat-form-field>\\n          </div>\\n        </div>\\n        <div class=\\\"example-button-container\\\">\\n\\n          <button mat-raised-button (click)=\\\"showAddchapter=false\\\" class=\\\"\\n          text-white ws-mat-primary-background  mat-button-base margin-right-xl\\\">Cancel</button>\\n\\n          <button mat-raised-button [disabled]=\\\"!createTopicForm.valid\\\" [matMenuTriggerFor]=\\\"menu\\\"\\n            aria-label=\\\"Example icon-button with a menu\\\" class=\\\"text-white ws-mat-primary-background  mat-button-base\\\">\\n            <mat-icon>add</mat-icon> Add Topic/Resource\\n          </button>\\n\\n\\n\\n          <mat-menu #menu=\\\"matMenu\\\">\\n            <button mat-menu-item (click)=\\\"setContentType('collection')\\\">\\n              <mat-icon>book</mat-icon>\\n              <span>Topic</span>\\n            </button>\\n            <button mat-menu-item (click)=\\\"setContentType('assessment')\\\">\\n              <mat-icon>check_circle</mat-icon>\\n              <span>Add Assessment</span>\\n            </button>\\n            <button mat-menu-item (click)=\\\"setContentType('web')\\\">\\n              <mat-icon>link</mat-icon>\\n              <span>Attach a link</span>\\n            </button>\\n            <button mat-menu-item (click)=\\\"setContentType('upload')\\\">\\n              <mat-icon>cloud_upload</mat-icon>\\n              <span>Upload content</span>\\n            </button>\\n            <button mat-menu-item (click)=\\\"setContentType('webModule')\\\">\\n              <mat-icon>insert_drive_file</mat-icon>\\n              <span>Web Page</span>\\n            </button>\\n\\n          </mat-menu>\\n        </div>\\n\\n      </form>\\n\\n      <ws-auth-url-upload [isCollectionEditor]=\\\"true\\\" *ngIf=\\\"!showAddchapter && viewMode === 'curate'\\\"\\n        [isSubmitPressed]=\\\"isSubmitPressed\\\" (data)=\\\"action($event)\\\"></ws-auth-url-upload>\\n      <ws-auth-file-upload [isCollectionEditor]=\\\"true\\\" *ngIf=\\\"!showAddchapter && viewMode === 'upload'\\\"\\n        [isSubmitPressed]=\\\"isSubmitPressed\\\" (data)=\\\"action($event)\\\">\\n      </ws-auth-file-upload>\\n      <ws-auth-quiz [isCollectionEditor]=\\\"true\\\" *ngIf=\\\"!showAddchapter && viewMode === 'assessment'\\\"\\n        [isSubmitPressed]=\\\"isSubmitPressed\\\" (data)=\\\"action($event)\\\"></ws-auth-quiz>\\n\\n        <ws-auth-web-module-editor  *ngIf=\\\"!showAddchapter && viewMode === 'webmodule'\\\" (data)=\\\"action($event)\\\">\\n        </ws-auth-web-module-editor>\\n\\n      <ws-auth-edit-meta [parentContent]=\\\"currentParentId\\\" [isSubmitPressed]=\\\"isSubmitPressed\\\" (data)=\\\"action($event)\\\"\\n        *ngIf=\\\"!showAddchapter && viewMode === 'meta'\\\"></ws-auth-edit-meta>\\n\\n      <!--  [class.hidden]=\\\"viewMode !== 'meta'\\\" -->\\n\\n      <ws-auth-edit-meta [parentContent]=\\\"currentParentId\\\" [isSubmitPressed]=\\\"isSubmitPressed\\\" (data)=\\\"action($event)\\\"\\n        *ngIf=\\\"!showAddchapter && viewMode !== 'meta'\\\"></ws-auth-edit-meta>\\n\\n\\n    </mat-sidenav-container>\\n  </mat-drawer-content>\\n</mat-drawer-container>\\n\"","export default \"<mat-toolbar class=\\\"mat-primary mat-elevation-z3\\\">\\n\\n  <span class=\\\"material-icons\\\" routerLink=\\\"/page/home\\\" i18n-matTooltip matTooltip=\\\"Home\\\">\\n    home\\n  </span>\\n\\n  <img [src]=\\\"appIcon \\\" alt=\\\" Logo\\\" class=\\\"app-logo viewer-logo\\\" />\\n\\n\\n\\n  <ng-container *ngIf=\\\" courseNameHeader\\\">\\n    <a routerLink=\\\"/page/home\\\" i18n-matTooltip matTooltip=\\\"Home\\\" class=\\\"logo-dim\\\">\\n      <img [src]=\\\"appIcon\\\" alt=\\\"Application Logo\\\" id=\\\"app-logo\\\" class=\\\"app-logo\\\" />\\n    </a>\\n    <h3 class=\\\"mt-name margin-left-l\\\">{{courseNameHeader}}</h3>\\n\\n    <span class=\\\"spacer width-1-1\\\"></span>\\n\\n    <mat-icon i18n-matTooltip matTooltip=\\\"Course Settings\\\" class=\\\"margin-right-l\\\" (click)=\\\"showCourseSettings()\\\">\\n      settings</mat-icon>\\n\\n    <div *ngFor=\\\"let button of requiredConfig || []\\\" class=\\\"button-grid cursor-pointer\\\"\\n      (click)=\\\"action.next(button.event)\\\">\\n      <button mat-raised-button class=\\\" header-btn text-white ws-mat-primary-background mat-button-base margin-right-l\\\">\\n        <!-- <mat-icon class=\\\"text-white small-icon ws-mat-primary-text\\\">{{ button.icon }}</mat-icon> -->\\n        {{ button.title }}\\n      </button>\\n\\n    </div>\\n\\n\\n    <!-- <button  mat-raised-button i18n class=\\\"header-btn text-white ws-mat-primary-background mat-button-base\\\" (click)=\\\"headerService.saveCourseContent()\\\">\\n          Save</button> -->\\n\\n\\n  </ng-container>\\n\\n\\n\\n  <span class=\\\"header-spacer\\\"></span>\\n\\n\\n\\n\\n</mat-toolbar>\"","export const DEPTH_RUE: any = {\n  'Learning Path': 4,\n  Course: 3,\n  Collection: 2,\n  Resource: 1,\n}\n","import { CourseCollectionComponent } from './components/course-collection/course-collection.component'\n// import { CollectionComponent } from './components/collection/collection.component'\nimport { NgModule } from '@angular/core'\nimport { Routes, RouterModule } from '@angular/router'\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CourseCollectionComponent,\n  },\n]\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n  providers: [],\n})\nexport class CollectionRoutingModule { }\n","import { DragDropModule } from '@angular/cdk/drag-drop'\nimport { CommonModule } from '@angular/common'\nimport { NgModule } from '@angular/core'\nimport { MatTreeModule } from '@angular/material/tree'\nimport { SharedModule } from '@ws/author/src/lib/modules/shared/shared.module'\nimport { AuthViewerModule } from '@ws/author/src/lib/modules/viewer/viewer.module'\nimport { EditorSharedModule } from '@ws/author/src/lib/routing/modules/editor/shared/shared.module'\nimport { CurateModule } from './../curate/curate.module'\nimport { UploadModule } from './../upload/upload.module'\nimport { CollectionRoutingModule } from './collection-routing.module'\nimport { AuthCollectionMatmenuComponent } from './components/auth-collection-matmenu/auth-collection-matmenu.component'\nimport { AuthEditorOptionsComponent } from './components/auth-editor-options/auth-editor-options.component'\nimport { AuthTableOfContentsComponent } from './components/auth-table-of-contents/auth-table-of-contents.component'\nimport { AuthTableTreeLabelComponent } from './components/auth-table-tree-label/auth-table-tree-label.component'\nimport { CollectionComponent } from './components/collection/collection.component'\nimport { CourseCollectionComponent } from './components/course-collection/course-collection.component'\nimport { AuthTocComponent } from './components/auth-toc/auth-toc.component'\nimport { QuizModule } from './../quiz/quiz.module'\nimport { CourseHeaderComponent } from './components/course-header/course-header.component'\nimport { BtnPageBackModule } from '@ws-widget/collection'\nimport { WebPageModule } from './../web-page/web-page.module'\n\nimport {\n  MatToolbarModule,\n  MatIconModule,\n  MatButtonModule,\n  MatTooltipModule,\n} from '@angular/material'\n\n@NgModule({\n  declarations: [\n    CollectionComponent,\n    AuthTableOfContentsComponent,\n    AuthEditorOptionsComponent,\n    AuthTableTreeLabelComponent,\n    AuthCollectionMatmenuComponent,\n    CourseCollectionComponent,\n    AuthTocComponent,\n    CourseHeaderComponent,\n  ],\n  imports: [\n    CommonModule,\n    CollectionRoutingModule,\n    SharedModule,\n    EditorSharedModule,\n    MatTreeModule,\n    DragDropModule,\n    AuthViewerModule,\n    UploadModule,\n    CurateModule,\n    QuizModule,\n    MatToolbarModule,\n    MatIconModule,\n    MatButtonModule,\n    MatTooltipModule,\n    BtnPageBackModule,\n    WebPageModule,\n  ],\n})\nexport class CollectionModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9qZWN0L3dzL2F1dGhvci9zcmMvbGliL3JvdXRpbmcvbW9kdWxlcy9lZGl0b3Ivcm91dGluZy9tb2R1bGVzL2NvbGxlY3Rpb24vY29tcG9uZW50cy9hdXRoLWNvbGxlY3Rpb24tbWF0bWVudS9hdXRoLWNvbGxlY3Rpb24tbWF0bWVudS5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, EventEmitter, Input, OnInit, Output, ViewChild } from '@angular/core'\nimport { ICustomCreateEntity } from './../../interface/create-menu'\n\n@Component({\n  selector: 'ws-auth-collection-matmenu',\n  templateUrl: './auth-collection-matmenu.component.html',\n  styleUrls: ['./auth-collection-matmenu.component.scss'],\n})\nexport class AuthCollectionMatmenuComponent implements OnInit {\n  @Output() action = new EventEmitter<{ action: string; type?: string }>()\n  @Input() type!: string\n  @Input() childType!: ICustomCreateEntity[]\n  @ViewChild('childMenu', { static: true }) public childMenu!: any\n\n  constructor() {}\n\n  ngOnInit() {}\n\n  click(action: string, type?: string) {\n    this.action.emit({ action, type })\n  }\n}\n","export default \".op500 {\\n  opacity: 0.5;\\n}\\n\\n.menu-icon {\\n  position: relative;\\n  top: 2px;\\n  font-size: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3NvbmFzaGFqdS9WaWRlb3Mvc3BoZXJlLW1vYmlsZS9wcm9qZWN0L3dzL2F1dGhvci9zcmMvbGliL3JvdXRpbmcvbW9kdWxlcy9lZGl0b3Ivcm91dGluZy9tb2R1bGVzL2NvbGxlY3Rpb24vY29tcG9uZW50cy9hdXRoLWVkaXRvci1vcHRpb25zL2F1dGgtZWRpdG9yLW9wdGlvbnMuY29tcG9uZW50LnNjc3MiLCJwcm9qZWN0L3dzL2F1dGhvci9zcmMvbGliL3JvdXRpbmcvbW9kdWxlcy9lZGl0b3Ivcm91dGluZy9tb2R1bGVzL2NvbGxlY3Rpb24vY29tcG9uZW50cy9hdXRoLWVkaXRvci1vcHRpb25zL2F1dGgtZWRpdG9yLW9wdGlvbnMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFBO0FDQ0Y7O0FERUE7RUFDRSxrQkFBQTtFQUNBLFFBQUE7RUFDQSxlQUFBO0FDQ0YiLCJmaWxlIjoicHJvamVjdC93cy9hdXRob3Ivc3JjL2xpYi9yb3V0aW5nL21vZHVsZXMvZWRpdG9yL3JvdXRpbmcvbW9kdWxlcy9jb2xsZWN0aW9uL2NvbXBvbmVudHMvYXV0aC1lZGl0b3Itb3B0aW9ucy9hdXRoLWVkaXRvci1vcHRpb25zLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm9wNTAwIHtcbiAgb3BhY2l0eTogMC41O1xufVxuXG4ubWVudS1pY29uIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0b3A6IDJweDtcbiAgZm9udC1zaXplOiAyMHB4O1xufVxuIiwiLm9wNTAwIHtcbiAgb3BhY2l0eTogMC41O1xufVxuXG4ubWVudS1pY29uIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0b3A6IDJweDtcbiAgZm9udC1zaXplOiAyMHB4O1xufSJdfQ== */\"","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core'\nimport { DEPTH_RUE } from '@ws/author/src/lib/constants/depth-rule'\nimport { ICreateEntity } from '@ws/author/src/lib/interface/create-entity'\nimport { EditorContentService } from '@ws/author/src/lib/routing/modules/editor/services/editor-content.service'\nimport { AuthInitService } from '@ws/author/src/lib/services/init.service'\nimport { ICustomCreateEntity } from './../../interface/create-menu'\nimport { IContentNode, IContentTreeNode } from './../../interface/icontent-tree'\nimport { CollectionStoreService } from './../../services/store.service'\n\n@Component({\n  selector: 'ws-auth-editor-options',\n  templateUrl: './auth-editor-options.component.html',\n  styleUrls: ['./auth-editor-options.component.scss'],\n})\nexport class AuthEditorOptionsComponent implements OnInit {\n  @Input() node!: IContentTreeNode\n  @Input() isInvalid = true\n  @Output() action = new EventEmitter<{ action: string; type?: string }>()\n  creationContent!: Map<string, ICreateEntity>\n  allowedChild: ICustomCreateEntity[] = []\n  allowedSibling: ICustomCreateEntity[] = []\n  canEdit = false\n  contentEditDisabled = false\n  metaEditDisabled = false\n\n  constructor(\n    private authInitService: AuthInitService,\n    private accessService: EditorContentService,\n    private storeService: CollectionStoreService,\n  ) { }\n\n  ngOnInit() {\n    this.creationContent = this.authInitService.creationEntity\n    const childrenConfig = this.authInitService.collectionConfig.childrenConfig\n    const contentTypeConfig = childrenConfig[this.node.category]\n    const content = this.accessService.getUpdatedMeta(this.node.identifier)\n    this.contentEditDisabled = content.isContentEditingDisabled\n    this.metaEditDisabled = content.isMetaEditingDisabled\n    this.canEdit = this.accessService.hasAccess(content)\n    if (\n      contentTypeConfig &&\n      this.node.editable &&\n      this.canEdit &&\n      contentTypeConfig.allowCreation\n    ) {\n      this.allowedChild = this.formChildren(contentTypeConfig, this.node.level + 1)\n    }\n    if (this.node.parentId) {\n      const parentType = this.storeService.flatNodeMap.get(this.node.parentId) as IContentNode\n      const parentContent = this.accessService.getUpdatedMeta(parentType.identifier)\n      if (\n        parentType &&\n        childrenConfig[parentType.category] &&\n        this.node.editable &&\n        !parentContent.isContentEditingDisabled &&\n        this.accessService.hasAccess(parentContent) &&\n        childrenConfig[parentType.category].allowCreation\n      ) {\n        this.allowedSibling = this.formChildren(\n          childrenConfig[parentType.category],\n          this.node.level,\n        )\n      }\n    }\n  }\n\n  formChildren(contentTypeConfig: any, currentDepth: number): ICustomCreateEntity[] {\n\n    const topLevel = Array.from(this.creationContent.values())\n    const child: ICustomCreateEntity[] = []\n\n    topLevel.forEach(v => {\n      if (\n        v.id !== 'resource' &&\n        v.id !== 'collection' &&\n        contentTypeConfig.allowedCreationType &&\n        contentTypeConfig.allowedCreationType.includes(v.id) &&\n        this.authInitService.collectionConfig.maxDepth >=\n        currentDepth + (DEPTH_RUE[v.contentType] || 1)\n      ) {\n        child.push(\n          this.recursiveAddFunction(v),\n        )\n      }\n    })\n    return child\n  }\n  recursiveAddFunction(\n    content: ICreateEntity,\n  ): ICustomCreateEntity {\n    const children: ICustomCreateEntity[] = []\n    const returnValue: ICustomCreateEntity = {\n      children,\n      id: content.id,\n      name: content.name,\n      icon: content.icon,\n    }\n    // if (content.id === 'resource' && content.children) {\n    //   // console.log('children==>', content.children)\n    //   content.children.forEach(v => {\n    //     const entity = this.authInitService.creationEntity.get(v)\n    //     // console.log('entity==>', entity)\n    //     if (\n    //       entity &&\n    //       allowedType.includes(entity.id) &&\n    //       this.authInitService.collectionConfig.maxDepth >=\n    //       currentDepth + (DEPTH_RUE[entity.contentType] || 1)\n    //     ) {\n    //       children.push(this.recursiveAddFunction(entity, allowedType, currentDepth))\n    //     }\n    //   })\n    // }\n    return returnValue\n  }\n\n  click(action: string, type?: string) {\n    this.action.emit({ action, type })\n  }\n}\n","export default \".custom-card {\\n  height: 60px;\\n  line-height: 50px;\\n}\\n\\n.node-name {\\n  max-width: 185px;\\n  min-width: 145px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  display: -webkit-box;\\n  -webkit-line-clamp: 1;\\n  /* number of lines to show */\\n  -webkit-box-orient: vertical;\\n}\\n\\n.node-name + .placeholder {\\n  margin-top: 19px;\\n}\\n\\n.placeholder {\\n  z-index: 2;\\n  margin-top: -24px;\\n  position: absolute;\\n}\\n\\n.placeholder.second {\\n  margin-top: 16px;\\n}\\n\\n.placeholder .dot {\\n  position: absolute;\\n  background: #e3165b;\\n  border-radius: 10px;\\n  height: 6px;\\n  width: 6px;\\n}\\n\\n.placeholder .line {\\n  position: absolute;\\n  background: rgba(0, 0, 0, 0.54);\\n  left: 6px;\\n  top: 2px;\\n  height: 1px;\\n  width: 144px;\\n}\\n\\n.mat-tree-node {\\n  cursor: pointer;\\n  min-height: 35px !important;\\n  height: 35px !important;\\n  margin-top: 5px;\\n  border-radius: 5px;\\n}\\n\\n.cdk-drag-preview {\\n  background-color: grey;\\n  margin-top: 15px;\\n  margin-left: 15px;\\n  position: relative;\\n  padding: 5px;\\n}\\n\\n.cdk-drag-preview mat-icon {\\n  top: 4px;\\n  position: absolute;\\n}\\n\\n.cdk-drag-preview span {\\n  margin-left: 30px;\\n}\\n\\n.node-icon {\\n  padding-left: 5px;\\n  padding-right: 10px;\\n  top: 1px;\\n  position: relative;\\n}\\n\\n.menu-icon {\\n  position: relative;\\n  top: 2px;\\n  font-size: 20px;\\n}\\n\\n.mat-menu-content {\\n  padding: 0px;\\n}\\n\\n.mat-menu-item {\\n  height: 35px;\\n  line-height: 35px;\\n  min-width: 200px;\\n}\\n\\nmat-tree {\\n  max-height: 650px;\\n  overflow: hidden;\\n  width: 310px;\\n  -webkit-overflow-scrolling: touch;\\n}\\n\\nmat-tree:hover {\\n  overflow: auto;\\n}\\n\\nmat-tree::-webkit-scrollbar {\\n  width: 8px;\\n  height: 8px;\\n}\\n\\n@media (hover: none) {\\n  mat-tree::-webkit-scrollbar {\\n    width: 0px !important;\\n    height: 0px !important;\\n  }\\n}\\n\\n@media (pointer: coarse) {\\n  mat-tree::-webkit-scrollbar {\\n    width: 0px !important;\\n    height: 0px !important;\\n  }\\n  mat-tree::-webkit-scrollbar::-webkit-scrollbar-track {\\n    background: transparent;\\n  }\\n}\\n\\nmat-tree::-webkit-scrollbar-track {\\n  background: #cfcfcf;\\n}\\n\\nmat-tree::-webkit-scrollbar-thumb {\\n  background: #9e9e9e;\\n}\\n\\nmat-tree::-webkit-scrollbar-thumb:hover {\\n  background: #707070;\\n}\\n\\n.op500 {\\n  opacity: 0.5;\\n}\\n\\n.drag {\\n  margin-right: 10px;\\n}\\n\\n.transitionD {\\n  transition: all 1s;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3NvbmFzaGFqdS9WaWRlb3Mvc3BoZXJlLW1vYmlsZS9wcm9qZWN0L3dzL2F1dGhvci9zcmMvbGliL3JvdXRpbmcvbW9kdWxlcy9lZGl0b3Ivcm91dGluZy9tb2R1bGVzL2NvbGxlY3Rpb24vY29tcG9uZW50cy9hdXRoLXRhYmxlLW9mLWNvbnRlbnRzL2F1dGgtdGFibGUtb2YtY29udGVudHMuY29tcG9uZW50LnNjc3MiLCJwcm9qZWN0L3dzL2F1dGhvci9zcmMvbGliL3JvdXRpbmcvbW9kdWxlcy9lZGl0b3Ivcm91dGluZy9tb2R1bGVzL2NvbGxlY3Rpb24vY29tcG9uZW50cy9hdXRoLXRhYmxlLW9mLWNvbnRlbnRzL2F1dGgtdGFibGUtb2YtY29udGVudHMuY29tcG9uZW50LnNjc3MiLCIvaG9tZS9zb25hc2hhanUvVmlkZW9zL3NwaGVyZS1tb2JpbGUvc3R5bGVzL193cy12YXJzLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0E7RUFDRSxZQUFBO0VBQ0EsaUJBQUE7QUNGRjs7QURNQTtFQUNFLGdCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxnQkFBQTtFQUNBLHVCQUFBO0VBQ0Esb0JBQUE7RUFDQSxxQkFBQTtFQUF1Qiw0QkFBQTtFQUN2Qiw0QkFBQTtBQ0ZGOztBREtBO0VBQ0UsZ0JBQUE7QUNGRjs7QURLQTtFQUNFLFVBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0FDRkY7O0FESUU7RUFDRSxnQkFBQTtBQ0ZKOztBREtFO0VBQ0Usa0JBQUE7RUFDQSxtQkFBQTtFQUNBLG1CQUFBO0VBQ0EsV0FBQTtFQUNBLFVBQUE7QUNISjs7QURNRTtFQUNFLGtCQUFBO0VBQ0EsK0JBQUE7RUFDQSxTQUFBO0VBQ0EsUUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0FDSko7O0FEUUE7RUFDRSxlQUFBO0VBQ0EsMkJBQUE7RUFDQSx1QkFBQTtFQUNBLGVBQUE7RUFDQSxrQkFBQTtBQ0xGOztBRFFBO0VBQ0Usc0JBQUE7RUFDQSxnQkFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0FDTEY7O0FET0U7RUFDRSxRQUFBO0VBQ0Esa0JBQUE7QUNMSjs7QURRRTtFQUNFLGlCQUFBO0FDTko7O0FEVUE7RUFDRSxpQkFBQTtFQUNBLG1CQUFBO0VBQ0EsUUFBQTtFQUNBLGtCQUFBO0FDUEY7O0FEVUE7RUFDRSxrQkFBQTtFQUNBLFFBQUE7RUFDQSxlQUFBO0FDUEY7O0FEVUE7RUFDRSxZQUFBO0FDUEY7O0FEVUE7RUFDRSxZQUFBO0VBQ0EsaUJBQUE7RUFDQSxnQkFBQTtBQ1BGOztBRFVBO0VBQ0UsaUJBQUE7RUFDQSxnQkFBQTtFQUNBLFlBQUE7RUFLQSxpQ0FBQTtBQ1hGOztBRE9FO0VBQ0UsY0FBQTtBQ0xKOztBRFVFO0VBQ0UsVUVwR007RUZxR04sV0VyR007QUQ2RlY7O0FEVUk7RUFKRjtJQU1JLHFCQURjO0lBRWQsc0JBRmM7RUNObEI7QUFDRjs7QURVSTtFQVZGO0lBWUkscUJBRGM7SUFFZCxzQkFGYztFQ05sQjtFRFVJO0lBQ0UsdUJBQUE7RUNSTjtBQUNGOztBRFlFO0VBQ0UsbUJBQUE7QUNWSjs7QURhRTtFQUNFLG1CQUFBO0FDWEo7O0FEY0U7RUFDRSxtQkFBQTtBQ1pKOztBRGdCQTtFQUNFLFlBQUE7QUNiRjs7QURnQkE7RUFDRSxrQkFBQTtBQ2JGOztBRGdCQTtFQUNFLGtCQUFBO0FDYkYiLCJmaWxlIjoicHJvamVjdC93cy9hdXRob3Ivc3JjL2xpYi9yb3V0aW5nL21vZHVsZXMvZWRpdG9yL3JvdXRpbmcvbW9kdWxlcy9jb2xsZWN0aW9uL2NvbXBvbmVudHMvYXV0aC10YWJsZS1vZi1jb250ZW50cy9hdXRoLXRhYmxlLW9mLWNvbnRlbnRzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCAnc3R5bGVzL193cy12YXJzLnNjc3MnO1xuQGltcG9ydCAnc3R5bGVzL193cy1taXhpbnMuc2Nzcyc7XG5cbi5jdXN0b20tY2FyZCB7XG4gIGhlaWdodDogNjBweDtcbiAgbGluZS1oZWlnaHQ6IDUwcHg7XG4gIC8vdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4ubm9kZS1uYW1lIHtcbiAgbWF4LXdpZHRoOiAxODVweDtcbiAgbWluLXdpZHRoOiAxNDVweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIGRpc3BsYXk6IC13ZWJraXQtYm94O1xuICAtd2Via2l0LWxpbmUtY2xhbXA6IDE7IC8qIG51bWJlciBvZiBsaW5lcyB0byBzaG93ICovXG4gIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7XG59XG5cbi5ub2RlLW5hbWUgKyAucGxhY2Vob2xkZXIge1xuICBtYXJnaW4tdG9wOiAxOXB4O1xufVxuXG4ucGxhY2Vob2xkZXIge1xuICB6LWluZGV4OiAyO1xuICBtYXJnaW4tdG9wOiAtMjRweDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuXG4gICYuc2Vjb25kIHtcbiAgICBtYXJnaW4tdG9wOiAxNnB4O1xuICB9XG5cbiAgLmRvdCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJhY2tncm91bmQ6ICNlMzE2NWI7XG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICBoZWlnaHQ6IDZweDtcbiAgICB3aWR0aDogNnB4O1xuICB9XG5cbiAgLmxpbmUge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNTQpO1xuICAgIGxlZnQ6IDZweDtcbiAgICB0b3A6IDJweDtcbiAgICBoZWlnaHQ6IDFweDtcbiAgICB3aWR0aDogMTQ0cHg7XG4gIH1cbn1cblxuLm1hdC10cmVlLW5vZGUge1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIG1pbi1oZWlnaHQ6IDM1cHggIWltcG9ydGFudDtcbiAgaGVpZ2h0OiAzNXB4ICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi10b3A6IDVweDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xufVxuXG4uY2RrLWRyYWctcHJldmlldyB7XG4gIGJhY2tncm91bmQtY29sb3I6IGdyZXk7XG4gIG1hcmdpbi10b3A6IDE1cHg7XG4gIG1hcmdpbi1sZWZ0OiAxNXB4O1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHBhZGRpbmc6IDVweDtcblxuICBtYXQtaWNvbiB7XG4gICAgdG9wOiA0cHg7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICB9XG5cbiAgc3BhbiB7XG4gICAgbWFyZ2luLWxlZnQ6IDMwcHg7XG4gIH1cbn1cblxuLm5vZGUtaWNvbiB7XG4gIHBhZGRpbmctbGVmdDogNXB4O1xuICBwYWRkaW5nLXJpZ2h0OiAxMHB4O1xuICB0b3A6IDFweDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4ubWVudS1pY29uIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0b3A6IDJweDtcbiAgZm9udC1zaXplOiAyMHB4O1xufVxuXG4ubWF0LW1lbnUtY29udGVudCB7XG4gIHBhZGRpbmc6IDBweDtcbn1cblxuLm1hdC1tZW51LWl0ZW0ge1xuICBoZWlnaHQ6IDM1cHg7XG4gIGxpbmUtaGVpZ2h0OiAzNXB4O1xuICBtaW4td2lkdGg6IDIwMHB4O1xufVxuXG5tYXQtdHJlZSB7XG4gIG1heC1oZWlnaHQ6IDY1MHB4O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aWR0aDogMzEwcHg7XG4gICY6aG92ZXIge1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICB9XG5cbiAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoO1xuXG4gICY6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICB3aWR0aDogJHNpemUteHM7XG4gICAgaGVpZ2h0OiAkc2l6ZS14cztcblxuICAgIEBtZWRpYSAoaG92ZXI6IG5vbmUpIHtcbiAgICAgICRzY3JvbGwtc2l6ZTogMHB4ICFpbXBvcnRhbnQ7XG4gICAgICB3aWR0aDogJHNjcm9sbC1zaXplO1xuICAgICAgaGVpZ2h0OiAkc2Nyb2xsLXNpemU7XG4gICAgfVxuXG4gICAgQG1lZGlhIChwb2ludGVyOiBjb2Fyc2UpIHtcbiAgICAgICRzY3JvbGwtc2l6ZTogMHB4ICFpbXBvcnRhbnQ7XG4gICAgICB3aWR0aDogJHNjcm9sbC1zaXplO1xuICAgICAgaGVpZ2h0OiAkc2Nyb2xsLXNpemU7XG5cbiAgICAgICY6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgJjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sge1xuICAgIGJhY2tncm91bmQ6ICNjZmNmY2Y7XG4gIH1cblxuICAmOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XG4gICAgYmFja2dyb3VuZDogIzllOWU5ZTtcbiAgfVxuXG4gICY6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiAjNzA3MDcwO1xuICB9XG59XG5cbi5vcDUwMCB7XG4gIG9wYWNpdHk6IDAuNTtcbn1cblxuLmRyYWcge1xuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG59XG5cbi50cmFuc2l0aW9uRCB7XG4gIHRyYW5zaXRpb246IGFsbCAxcztcbn1cbiIsIi5jdXN0b20tY2FyZCB7XG4gIGhlaWdodDogNjBweDtcbiAgbGluZS1oZWlnaHQ6IDUwcHg7XG59XG5cbi5ub2RlLW5hbWUge1xuICBtYXgtd2lkdGg6IDE4NXB4O1xuICBtaW4td2lkdGg6IDE0NXB4O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gIC13ZWJraXQtbGluZS1jbGFtcDogMTtcbiAgLyogbnVtYmVyIG9mIGxpbmVzIHRvIHNob3cgKi9cbiAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcbn1cblxuLm5vZGUtbmFtZSArIC5wbGFjZWhvbGRlciB7XG4gIG1hcmdpbi10b3A6IDE5cHg7XG59XG5cbi5wbGFjZWhvbGRlciB7XG4gIHotaW5kZXg6IDI7XG4gIG1hcmdpbi10b3A6IC0yNHB4O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG59XG4ucGxhY2Vob2xkZXIuc2Vjb25kIHtcbiAgbWFyZ2luLXRvcDogMTZweDtcbn1cbi5wbGFjZWhvbGRlciAuZG90IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBiYWNrZ3JvdW5kOiAjZTMxNjViO1xuICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICBoZWlnaHQ6IDZweDtcbiAgd2lkdGg6IDZweDtcbn1cbi5wbGFjZWhvbGRlciAubGluZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjU0KTtcbiAgbGVmdDogNnB4O1xuICB0b3A6IDJweDtcbiAgaGVpZ2h0OiAxcHg7XG4gIHdpZHRoOiAxNDRweDtcbn1cblxuLm1hdC10cmVlLW5vZGUge1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIG1pbi1oZWlnaHQ6IDM1cHggIWltcG9ydGFudDtcbiAgaGVpZ2h0OiAzNXB4ICFpbXBvcnRhbnQ7XG4gIG1hcmdpbi10b3A6IDVweDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xufVxuXG4uY2RrLWRyYWctcHJldmlldyB7XG4gIGJhY2tncm91bmQtY29sb3I6IGdyZXk7XG4gIG1hcmdpbi10b3A6IDE1cHg7XG4gIG1hcmdpbi1sZWZ0OiAxNXB4O1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHBhZGRpbmc6IDVweDtcbn1cbi5jZGstZHJhZy1wcmV2aWV3IG1hdC1pY29uIHtcbiAgdG9wOiA0cHg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbn1cbi5jZGstZHJhZy1wcmV2aWV3IHNwYW4ge1xuICBtYXJnaW4tbGVmdDogMzBweDtcbn1cblxuLm5vZGUtaWNvbiB7XG4gIHBhZGRpbmctbGVmdDogNXB4O1xuICBwYWRkaW5nLXJpZ2h0OiAxMHB4O1xuICB0b3A6IDFweDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4ubWVudS1pY29uIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0b3A6IDJweDtcbiAgZm9udC1zaXplOiAyMHB4O1xufVxuXG4ubWF0LW1lbnUtY29udGVudCB7XG4gIHBhZGRpbmc6IDBweDtcbn1cblxuLm1hdC1tZW51LWl0ZW0ge1xuICBoZWlnaHQ6IDM1cHg7XG4gIGxpbmUtaGVpZ2h0OiAzNXB4O1xuICBtaW4td2lkdGg6IDIwMHB4O1xufVxuXG5tYXQtdHJlZSB7XG4gIG1heC1oZWlnaHQ6IDY1MHB4O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aWR0aDogMzEwcHg7XG4gIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDtcbn1cbm1hdC10cmVlOmhvdmVyIHtcbiAgb3ZlcmZsb3c6IGF1dG87XG59XG5tYXQtdHJlZTo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICB3aWR0aDogOHB4O1xuICBoZWlnaHQ6IDhweDtcbn1cbkBtZWRpYSAoaG92ZXI6IG5vbmUpIHtcbiAgbWF0LXRyZWU6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICB3aWR0aDogMHB4ICFpbXBvcnRhbnQ7XG4gICAgaGVpZ2h0OiAwcHggIWltcG9ydGFudDtcbiAgfVxufVxuQG1lZGlhIChwb2ludGVyOiBjb2Fyc2UpIHtcbiAgbWF0LXRyZWU6Oi13ZWJraXQtc2Nyb2xsYmFyIHtcbiAgICB3aWR0aDogMHB4ICFpbXBvcnRhbnQ7XG4gICAgaGVpZ2h0OiAwcHggIWltcG9ydGFudDtcbiAgfVxuICBtYXQtdHJlZTo6LXdlYmtpdC1zY3JvbGxiYXI6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcbiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgfVxufVxubWF0LXRyZWU6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcbiAgYmFja2dyb3VuZDogI2NmY2ZjZjtcbn1cbm1hdC10cmVlOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XG4gIGJhY2tncm91bmQ6ICM5ZTllOWU7XG59XG5tYXQtdHJlZTo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiAjNzA3MDcwO1xufVxuXG4ub3A1MDAge1xuICBvcGFjaXR5OiAwLjU7XG59XG5cbi5kcmFnIHtcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xufVxuXG4udHJhbnNpdGlvbkQge1xuICB0cmFuc2l0aW9uOiBhbGwgMXM7XG59IiwiJGZvbnQtZmFtaWx5LXNhbnM6ICdTZWdvZSBVSScsIFJvYm90bywgJ0hlbHZldGljYSBOZXVlJywgQXJpYWwsXG4gICdOb3RvIFNhbnMnLCBzYW5zLXNlcmlmLCAnQXBwbGUgQ29sb3IgRW1vamknLCAnU2Vnb2UgVUkgRW1vamknLCAnU2Vnb2UgVUkgU3ltYm9sJyxcbiAgJ05vdG8gQ29sb3IgRW1vamknO1xuJGZvbnQtZmFtaWx5LXNlcmlmOiBHZW9yZ2lhLCBDYW1icmlhLCAnVGltZXMgTmV3IFJvbWFuJywgVGltZXMsIHNlcmlmO1xuJGZvbnQtZmFtaWx5LW1vbm86IE1lbmxvLCBNb25hY28sIENvbnNvbGFzLCAnTGliZXJhdGlvbiBNb25vJywgJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlO1xuJGZvbnQtZmFtaWx5LW9wZW4tc2FuczogJ09wZW4gU2Fucyc7XG4kZm9udC1mYW1pbHktb3Blbi1wb3BwaW5zOiAnUm9ib3RvJztcblxuXG4kc2l6ZS14czogOHB4O1xuJHNpemUtczogMTJweDtcbiRzaXplLW06IDE2cHg7XG4kc2l6ZS1sOiAyNHB4O1xuJHNpemUteGw6IDMycHg7XG4kc2l6ZS1sZzogMjhweDtcbiRzaXplLXh4bDogNDBweDtcblxuJG1hdC10b29sYmFyLXhzOiA1MnB4O1xuJG1hdC10b29sYmFyLWd0LXhzOiA1NnB4O1xuIl19 */\"","import { FlatTreeControl } from '@angular/cdk/tree'\nimport { Component, EventEmitter, OnDestroy, OnInit, Output } from '@angular/core'\nimport { MatDialog, MatSnackBar } from '@angular/material'\nimport { MatTreeFlatDataSource, MatTreeFlattener } from '@angular/material/tree'\nimport { NOTIFICATION_TIME } from '@ws/author/src/lib/constants/constant'\nimport { Notify } from '@ws/author/src/lib/constants/notificationMessage'\nimport { ConfirmDialogComponent } from '@ws/author/src/lib/modules/shared/components/confirm-dialog/confirm-dialog.component'\nimport { NotificationComponent } from '@ws/author/src/lib/modules/shared/components/notification/notification.component'\nimport { AuthInitService } from '@ws/author/src/lib/services/init.service'\nimport { LoaderService } from '@ws/author/src/lib/services/loader.service'\nimport { EditorContentService } from '../../../../../services/editor-content.service'\nimport { IContentNode } from '../../interface/icontent-tree'\nimport { AuthPickerComponent } from './../../../../../shared/components/auth-picker/auth-picker.component'\nimport { IContentTreeNode } from './../../interface/icontent-tree'\nimport { CollectionStoreService } from './../../services/store.service'\nimport { BreakpointObserver, Breakpoints, BreakpointState } from '@angular/cdk/layout'\nimport { map } from 'rxjs/operators'\n@Component({\n  selector: 'ws-auth-table-of-contents',\n  templateUrl: './auth-table-of-contents.component.html',\n  styleUrls: ['./auth-table-of-contents.component.scss'],\n})\nexport class AuthTableOfContentsComponent implements OnInit, OnDestroy {\n  @Output() action = new EventEmitter<{ type: string; identifier: string }>()\n  @Output() closeEvent = new EventEmitter<boolean>()\n  treeControl!: FlatTreeControl<IContentTreeNode>\n  treeFlattener!: MatTreeFlattener<IContentNode, IContentTreeNode>\n  dataSource!: MatTreeFlatDataSource<IContentNode, IContentTreeNode>\n  isDragging = false\n  dropContainer: IContentTreeNode | null = null\n  dragContainer: IContentTreeNode | null = null\n  expandDelay = 500\n  isDropDisabled = false\n  expandTimeout: any\n  draggingPosition: 'above' | 'below' | 'center' | null = null\n  selectedNode: number | null = null\n  expandedNodes = new Set<number>()\n  parentNodeId!: number\n  drawer = true\n  menubtn = true\n  parentHierarchy: number[] = []\n  backUpInformation = {\n    isDragging: false,\n    dropContainer: null as any,\n    dragContainer: null as any,\n    draggingPosition: null as any,\n  }\n  invalidIds: number[] = []\n  mediumScreen = false\n  mediumSizeBreakpoint$ = this.breakpointObserver\n    .observe([Breakpoints.XSmall, Breakpoints.Small])\n    .pipe(map((res: BreakpointState) => res.matches))\n  leftarrow = true\n  constructor(\n    private dialog: MatDialog,\n    private snackBar: MatSnackBar,\n    private store: CollectionStoreService,\n    private editorStore: EditorContentService,\n    private loaderService: LoaderService,\n    private authInitService: AuthInitService,\n    private breakpointObserver: BreakpointObserver,\n  ) {}\n\n  private _transformer = (node: IContentNode, level: number): IContentTreeNode => {\n    return {\n      level,\n      id: node.id,\n      identifier: node.identifier,\n      category: node.category,\n      expandable: !!node.children && node.children.length > 0,\n      children: node.children ? node.children.map(v => v.id) : [],\n      editable: node.editable,\n      childLoaded: node.childLoaded,\n      parentId: node.parentId,\n    }\n  }\n\n  ngOnInit() {\n    this.parentNodeId = this.store.currentParentNode\n    this.treeControl = new FlatTreeControl<IContentTreeNode>(\n      node => node.level,\n      node => node.expandable,\n    )\n\n    this.treeFlattener = new MatTreeFlattener(\n      this._transformer,\n      node => node.level,\n      node => node.expandable,\n      node => node.children,\n    )\n\n    this.store.onInvalidNodeChange.subscribe(v => {\n      this.invalidIds = v\n      this.expandNodesById(v)\n    })\n    this.dataSource = new MatTreeFlatDataSource(this.treeControl, this.treeFlattener)\n\n    this.store.treeStructureChange.subscribe(data => {\n      this.dataSource.data = [data as IContentNode]\n      if (this.parentNodeId === this.store.currentParentNode) {\n        this.expandNodesById()\n        if (this.selectedNode && !this.store.flatNodeMap.get(this.selectedNode)) {\n          this.parentHierarchy.forEach(v => {\n            if (this.store.flatNodeMap.get(v)) {\n              const identifier = this.store.uniqueIdMap.get(v) as string\n              this.selectedNode = v\n              this.editorStore.currentContent = identifier\n              this.store.currentSelectedNode = v\n              this.editorStore.changeActiveCont.next(identifier)\n              return\n            }\n          })\n        }\n      } else {\n        this.parentNodeId = this.store.currentParentNode\n      }\n    })\n    this.store.selectedNodeChange.subscribe(data => {\n      if (data) {\n        this.selectedNode = data\n      }\n    })\n    this.mediumSizeBreakpoint$.subscribe(isLtMedium => {\n      this.mediumScreen = isLtMedium\n      if (isLtMedium) {\n        this.drawer = true\n        this.leftarrow = false\n        this.menubtn = false\n      } else {\n        this.leftarrow = true\n        this.menubtn = true\n      }\n    })\n  }\n\n  ngOnDestroy() {\n    this.loaderService.changeLoad.next(false)\n  }\n\n  onNodeSelect(node: IContentTreeNode) {\n    if (node.id !== this.selectedNode) {\n      this.selectedNode = node.id\n      this.editorStore.currentContent = node.identifier\n      this.store.currentSelectedNode = node.id\n      this.editorStore.changeActiveCont.next(node.identifier)\n    }\n  }\n\n  closeSidenav() {\n    this.closeEvent.emit(true)\n  }\n\n  dragStart(node: IContentTreeNode) {\n    this.isDragging = true\n    this.dragContainer = node\n  }\n\n  dragEnd() {\n    this.backUpInformation = {\n      isDragging: this.isDragging,\n      dropContainer: this.dropContainer,\n      dragContainer: this.dragContainer,\n      draggingPosition: this.draggingPosition,\n    }\n    this.isDragging = false\n    this.dropContainer = null\n    this.dragContainer = null\n    this.draggingPosition = null\n  }\n\n  dragHover(node: IContentTreeNode, event: MouseEvent) {\n    event.preventDefault()\n    if (this.isDragging) {\n      this.dropContainer = node\n      clearTimeout(this.expandTimeout)\n      this.expandTimeout = setTimeout(() => {\n        this.treeControl.expand(node)\n        // tslint:disable-next-line: align\n      }, this.expandDelay)\n      const percentageY = event.offsetY / (event.target as any).clientHeight\n      if (percentageY >= 0 && percentageY < 0.2) {\n        this.draggingPosition = 'above'\n      } else if (percentageY > 0.8) {\n        this.draggingPosition = 'below'\n      } else if (percentageY >= 0.2 && percentageY <= 0.8) {\n        this.draggingPosition = 'center'\n      }\n      const parentHierarchy: number[] = []\n      let currNode: IContentTreeNode | null = node\n      while (currNode) {\n        if (currNode && currNode.parentId) {\n          parentHierarchy.push(currNode.parentId)\n        }\n        currNode = this.getParentNode(currNode)\n      }\n      if (parentHierarchy.includes((this.dragContainer as IContentTreeNode).id)) {\n        this.isDropDisabled = true\n      } else if (this.dragContainer === this.dropContainer) {\n        this.isDropDisabled = true\n      } else if (['above', 'below'].includes(this.draggingPosition as string)) {\n        const parentNode = this.getParentNode(node)\n        this.isDropDisabled = !parentNode\n          ? true\n          : !this.store.allowDrop(\n              this.dragContainer as IContentTreeNode,\n              parentNode as IContentTreeNode,\n            )\n      } else {\n        this.isDropDisabled = !this.store.allowDrop(\n          this.dragContainer as IContentTreeNode,\n          this.dropContainer as IContentTreeNode,\n        )\n      }\n    }\n  }\n\n  dragHoverEnd($event: Event) {\n    $event.preventDefault()\n    if (this.isDragging) {\n      clearTimeout(this.expandTimeout)\n      this.backUpInformation.dropContainer = this.dropContainer as any\n      this.dropContainer = null\n    }\n  }\n\n  drop() {\n    this.isDragging = false\n    if (!this.isDropDisabled) {\n      this.preserveExpandedNodes()\n      const isAdjacentDrop = ['above', 'below'].includes(\n        this.backUpInformation.draggingPosition as string,\n      )\n      const dropContainer = isAdjacentDrop\n        ? this.getParentNode(this.backUpInformation.dropContainer as IContentTreeNode)\n        : this.backUpInformation.dropContainer\n\n      if (dropContainer.id !== this.backUpInformation.dragContainer.id) {\n        this.store.dragAndDrop(\n          this.backUpInformation.dragContainer as IContentTreeNode,\n          dropContainer as IContentTreeNode,\n          isAdjacentDrop ? this.backUpInformation.dropContainer.id : undefined,\n          this.backUpInformation.draggingPosition,\n        )\n      }\n    }\n  }\n\n  preserveExpandedNodes() {\n    this.expandedNodes = new Set<number>()\n    this.treeControl.dataNodes.forEach(v => {\n      if (this.treeControl.isExpandable(v) && this.treeControl.isExpanded(v)) {\n        this.expandedNodes.add(v.id)\n      }\n    })\n  }\n\n  expandNodesById(ids?: number[]) {\n    const idSet = ids ? new Set(ids) : this.expandedNodes\n    this.treeControl.dataNodes.forEach(node => {\n      if (idSet.has(node.id)) {\n        this.treeControl.expand(node)\n        let parent = this.getParentNode(node)\n        while (parent) {\n          this.treeControl.expand(parent)\n          parent = this.getParentNode(parent)\n        }\n      }\n    })\n  }\n  /*\n   Get the parent node of a node\n    */\n  getParentNode(node: IContentTreeNode): IContentTreeNode | null {\n    const currentLevel = node.level\n\n    if (currentLevel < 1) {\n      return null\n    }\n\n    const startIndex = this.treeControl.dataNodes.indexOf(node) - 1\n\n    for (let i = startIndex; i >= 0; i = i - 1) {\n      const currentNode = this.treeControl.dataNodes[i]\n\n      if (currentNode.level < currentLevel) {\n        return currentNode\n      }\n    }\n    return null\n  }\n\n  delete(node: IContentTreeNode) {\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      width: '500px',\n      height: '175px',\n      data: 'deleteTreeNode',\n    })\n    this.preserveExpandedNodes()\n    dialogRef.afterClosed().subscribe(confirm => {\n      if (confirm) {\n        this.parentHierarchy = []\n        let currNode: IContentTreeNode | null = node\n        while (currNode) {\n          if (currNode && currNode.parentId) {\n            this.parentHierarchy.push(currNode.parentId)\n          }\n          currNode = this.getParentNode(currNode)\n        }\n        this.store.deleteNode(node.id)\n        this.snackBar.openFromComponent(NotificationComponent, {\n          data: {\n            type: Notify.SUCCESS,\n          },\n          duration: NOTIFICATION_TIME * 1000,\n        })\n      }\n    })\n  }\n\n  async addChildOrSibling(node: IContentTreeNode, asSibling = false) {\n    const children = (node.children || []).map(v => this.store.uniqueIdMap.get(v))\n    const dialogRef = this.dialog.open(AuthPickerComponent, {\n      width: '90vw',\n      height: '90vh',\n      data: {\n        filter: this.authInitService.collectionConfig.childrenConfig[node.category].searchFilter,\n        selectedIds: children,\n      },\n    })\n    this.preserveExpandedNodes()\n    dialogRef.afterClosed().subscribe(async (contents: string[]) => {\n      if (contents && contents.length) {\n        const parentNode = (asSibling ? this.getParentNode(node) : node) as IContentTreeNode\n        this.expandedNodes.add(parentNode.id)\n        this.loaderService.changeLoad.next(true)\n        const isDone = await this.store.addChildOrSibling(\n          contents,\n          parentNode,\n          asSibling ? node.id : undefined,\n          'below',\n        )\n        this.loaderService.changeLoad.next(false)\n        this.snackBar.openFromComponent(NotificationComponent, {\n          data: {\n            type: isDone ? Notify.SUCCESS : Notify.FAIL,\n          },\n          duration: NOTIFICATION_TIME * 1000,\n        })\n      }\n    })\n  }\n\n  async createNewChildOrSibling(type: string, node: IContentTreeNode, asSibling = false) {\n    const parentNode = (asSibling ? this.getParentNode(node) : node) as IContentTreeNode\n    this.loaderService.changeLoad.next(true)\n    this.preserveExpandedNodes()\n    this.expandedNodes.add(parentNode.id)\n    const isDone = await this.store.createChildOrSibling(\n      type,\n      parentNode,\n      asSibling ? node.id : undefined,\n      'below',\n    )\n    this.snackBar.openFromComponent(NotificationComponent, {\n      data: {\n        type: isDone ? Notify.SUCCESS : Notify.FAIL,\n      },\n      duration: NOTIFICATION_TIME * 1000,\n    })\n    this.loaderService.changeLoad.next(false)\n  }\n\n  takeAction(action: string, node: IContentTreeNode, type?: string) {\n    switch (action) {\n      case 'editMeta':\n      case 'editContent':\n      case 'preview':\n        this.onNodeSelect(node)\n        this.action.emit({ type: action, identifier: node.identifier })\n        break\n      case 'delete':\n        this.delete(node)\n        break\n\n      case 'addChild':\n        this.addChildOrSibling(node)\n        break\n\n      case 'addSibling':\n        this.addChildOrSibling(node, true)\n        break\n\n      case 'createChild':\n        this.createNewChildOrSibling(type as string, node)\n        break\n\n      case 'createSibling':\n        this.createNewChildOrSibling(type as string, node, true)\n        break\n\n      default:\n        break\n    }\n  }\n}\n","export default \".node-name {\\n  position: relative;\\n  top: 2px;\\n  max-width: 185px;\\n  min-width: 145px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  display: -webkit-box;\\n  -webkit-line-clamp: 1;\\n  /* number of lines to show */\\n  -webkit-box-orient: vertical;\\n}\\n\\n.node-icon {\\n  padding-left: 5px;\\n  padding-right: 10px;\\n  top: 1px;\\n  position: relative;\\n}\\n\\ndiv {\\n  display: flex;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3NvbmFzaGFqdS9WaWRlb3Mvc3BoZXJlLW1vYmlsZS9wcm9qZWN0L3dzL2F1dGhvci9zcmMvbGliL3JvdXRpbmcvbW9kdWxlcy9lZGl0b3Ivcm91dGluZy9tb2R1bGVzL2NvbGxlY3Rpb24vY29tcG9uZW50cy9hdXRoLXRhYmxlLXRyZWUtbGFiZWwvYXV0aC10YWJsZS10cmVlLWxhYmVsLmNvbXBvbmVudC5zY3NzIiwicHJvamVjdC93cy9hdXRob3Ivc3JjL2xpYi9yb3V0aW5nL21vZHVsZXMvZWRpdG9yL3JvdXRpbmcvbW9kdWxlcy9jb2xsZWN0aW9uL2NvbXBvbmVudHMvYXV0aC10YWJsZS10cmVlLWxhYmVsL2F1dGgtdGFibGUtdHJlZS1sYWJlbC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLGdCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxnQkFBQTtFQUNBLHVCQUFBO0VBQ0Esb0JBQUE7RUFDQSxxQkFBQTtFQUF1Qiw0QkFBQTtFQUN2Qiw0QkFBQTtBQ0VGOztBRENBO0VBQ0UsaUJBQUE7RUFDQSxtQkFBQTtFQUNBLFFBQUE7RUFDQSxrQkFBQTtBQ0VGOztBRENBO0VBQ0UsYUFBQTtBQ0VGIiwiZmlsZSI6InByb2plY3Qvd3MvYXV0aG9yL3NyYy9saWIvcm91dGluZy9tb2R1bGVzL2VkaXRvci9yb3V0aW5nL21vZHVsZXMvY29sbGVjdGlvbi9jb21wb25lbnRzL2F1dGgtdGFibGUtdHJlZS1sYWJlbC9hdXRoLXRhYmxlLXRyZWUtbGFiZWwuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubm9kZS1uYW1lIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0b3A6IDJweDtcbiAgbWF4LXdpZHRoOiAxODVweDtcbiAgbWluLXdpZHRoOiAxNDVweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIGRpc3BsYXk6IC13ZWJraXQtYm94O1xuICAtd2Via2l0LWxpbmUtY2xhbXA6IDE7IC8qIG51bWJlciBvZiBsaW5lcyB0byBzaG93ICovXG4gIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7XG59XG5cbi5ub2RlLWljb24ge1xuICBwYWRkaW5nLWxlZnQ6IDVweDtcbiAgcGFkZGluZy1yaWdodDogMTBweDtcbiAgdG9wOiAxcHg7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cblxuZGl2IHtcbiAgZGlzcGxheTogZmxleDtcbn1cbiIsIi5ub2RlLW5hbWUge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHRvcDogMnB4O1xuICBtYXgtd2lkdGg6IDE4NXB4O1xuICBtaW4td2lkdGg6IDE0NXB4O1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgZGlzcGxheTogLXdlYmtpdC1ib3g7XG4gIC13ZWJraXQtbGluZS1jbGFtcDogMTtcbiAgLyogbnVtYmVyIG9mIGxpbmVzIHRvIHNob3cgKi9cbiAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDtcbn1cblxuLm5vZGUtaWNvbiB7XG4gIHBhZGRpbmctbGVmdDogNXB4O1xuICBwYWRkaW5nLXJpZ2h0OiAxMHB4O1xuICB0b3A6IDFweDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG5kaXYge1xuICBkaXNwbGF5OiBmbGV4O1xufSJdfQ== */\"","import { Component, Input, OnInit } from '@angular/core'\nimport { EditorContentService } from '@ws/author/src/lib/routing/modules/editor/services/editor-content.service'\nimport { CollectionResolverService } from './../../services/resolver.service'\n\n@Component({\n  selector: 'ws-auth-table-tree-label',\n  templateUrl: './auth-table-tree-label.component.html',\n  styleUrls: ['./auth-table-tree-label.component.scss'],\n})\nexport class AuthTableTreeLabelComponent implements OnInit {\n  @Input() identifier!: string\n  @Input() id!: number\n  @Input() isDragging = false\n  @Input() isInvalid = false\n  name = ''\n  @Input() icon = ''\n  constructor(\n    private storeService: EditorContentService,\n    private resolverService: CollectionResolverService,\n  ) { }\n\n  ngOnInit() {\n    this.storeService.onContentChange.subscribe(v => {\n      if (v === this.identifier) {\n        this.getUpdatedContent()\n      }\n    })\n    this.getUpdatedContent()\n  }\n\n  getUpdatedContent() {\n    const updatedMeta = this.storeService.getUpdatedMeta(this.identifier)\n    this.name = updatedMeta.name\n    this.icon = this.resolverService.getIcon(updatedMeta)\n  }\n}\n","export default \"#cdk-drop-list-0 > mat-tree-node:nth-child(1) {\\n  display: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3NvbmFzaGFqdS9WaWRlb3Mvc3BoZXJlLW1vYmlsZS9wcm9qZWN0L3dzL2F1dGhvci9zcmMvbGliL3JvdXRpbmcvbW9kdWxlcy9lZGl0b3Ivcm91dGluZy9tb2R1bGVzL2NvbGxlY3Rpb24vY29tcG9uZW50cy9hdXRoLXRvYy9hdXRoLXRvYy5jb21wb25lbnQuc2NzcyIsInByb2plY3Qvd3MvYXV0aG9yL3NyYy9saWIvcm91dGluZy9tb2R1bGVzL2VkaXRvci9yb3V0aW5nL21vZHVsZXMvY29sbGVjdGlvbi9jb21wb25lbnRzL2F1dGgtdG9jL2F1dGgtdG9jLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksYUFBQTtBQ0NKIiwiZmlsZSI6InByb2plY3Qvd3MvYXV0aG9yL3NyYy9saWIvcm91dGluZy9tb2R1bGVzL2VkaXRvci9yb3V0aW5nL21vZHVsZXMvY29sbGVjdGlvbi9jb21wb25lbnRzL2F1dGgtdG9jL2F1dGgtdG9jLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2Nkay1kcm9wLWxpc3QtMCA+IG1hdC10cmVlLW5vZGU6bnRoLWNoaWxkKDEpIHtcbiAgICBkaXNwbGF5OiBub25lXG59XG4vLyAjY2RrLWRyb3AtbGlzdC0wID4gbWF0LXRyZWUtbm9kZTpudGgtY2hpbGQoMikge1xuLy8gICAgIGJhY2tncm91bmQ6IHJnYmEoMzIsIDE1MCwgMjA1LCAwLjMpO1xuLy8gfVxuXG4iLCIjY2RrLWRyb3AtbGlzdC0wID4gbWF0LXRyZWUtbm9kZTpudGgtY2hpbGQoMSkge1xuICBkaXNwbGF5OiBub25lO1xufSJdfQ== */\"","import { FlatTreeControl } from '@angular/cdk/tree'\nimport { Component, EventEmitter, OnDestroy, OnInit, Output, Input, AfterViewInit } from '@angular/core'\nimport { MatDialog, MatSnackBar } from '@angular/material'\nimport { MatTreeFlatDataSource, MatTreeFlattener } from '@angular/material/tree'\nimport { NOTIFICATION_TIME } from '@ws/author/src/lib/constants/constant'\nimport { Notify } from '@ws/author/src/lib/constants/notificationMessage'\nimport { ConfirmDialogComponent } from '@ws/author/src/lib/modules/shared/components/confirm-dialog/confirm-dialog.component'\nimport { NotificationComponent } from '@ws/author/src/lib/modules/shared/components/notification/notification.component'\nimport { AuthInitService } from '@ws/author/src/lib/services/init.service'\nimport { LoaderService } from '@ws/author/src/lib/services/loader.service'\nimport { EditorContentService } from '../../../../../services/editor-content.service'\nimport { IContentNode } from '../../interface/icontent-tree'\nimport { AuthPickerComponent } from './../../../../../shared/components/auth-picker/auth-picker.component'\nimport { IContentTreeNode } from './../../interface/icontent-tree'\nimport { CollectionStoreService } from './../../services/store.service'\nimport { BreakpointObserver, Breakpoints, BreakpointState } from '@angular/cdk/layout'\nimport { map } from 'rxjs/operators'\n\ndeclare var $: any\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'ws-author-auth-toc',\n  templateUrl: './auth-toc.component.html',\n  styleUrls: ['./auth-toc.component.scss'],\n})\nexport class AuthTocComponent  implements OnInit, AfterViewInit, OnDestroy {\n  @Input() createdFromCourse: any\n  @Output() action = new EventEmitter<{ type: string; identifier: string; nodeClicked?: boolean }>()\n  @Output() closeEvent = new EventEmitter<boolean>()\n  @Output() node = new EventEmitter<any>()\n  @Output() data = new EventEmitter<string>()\n  treeControl!: FlatTreeControl<IContentTreeNode>\n  treeFlattener!: MatTreeFlattener<IContentNode, IContentTreeNode>\n  dataSource!: MatTreeFlatDataSource<IContentNode, IContentTreeNode>\n  isDragging = false\n  dropContainer: IContentTreeNode | null = null\n  dragContainer: IContentTreeNode | null = null\n  expandDelay = 500\n  isDropDisabled = false\n  expandTimeout: any\n  draggingPosition: 'above' | 'below' | 'center' | null = null\n  selectedNode: number | null = null\n  expandedNodes = new Set<number>()\n  parentNodeId!: number\n  drawer = true\n  menubtn = true\n  parentHierarchy: number[] = []\n  backUpInformation = {\n    isDragging: false,\n    dropContainer: null as any,\n    dragContainer: null as any,\n    draggingPosition: null as any,\n  }\n  invalidIds: number[] = []\n  mediumScreen = false\n  mediumSizeBreakpoint$ = this.breakpointObserver\n    .observe([Breakpoints.XSmall, Breakpoints.Small])\n    .pipe(map((res: BreakpointState) => res.matches))\n  leftarrow = true\n  constructor(\n    private dialog: MatDialog,\n    private snackBar: MatSnackBar,\n    private store: CollectionStoreService,\n    private editorStore: EditorContentService,\n    private loaderService: LoaderService,\n    private authInitService: AuthInitService,\n    private breakpointObserver: BreakpointObserver,\n  ) {}\n\n  private _transformer = (node: IContentNode, level: number): IContentTreeNode => {\n    return {\n      level,\n      id: node.id,\n      identifier: node.identifier,\n      category: node.category,\n      expandable: !!node.children && node.children.length > 0,\n      children: node.children ? node.children.map(v => v.id) : [],\n      editable: node.editable,\n      childLoaded: node.childLoaded,\n      parentId: node.parentId,\n    }\n  }\n\n  ngOnInit() {\n    this.parentNodeId = this.store.currentParentNode\n    this.treeControl = new FlatTreeControl<IContentTreeNode>(\n      node => node.level,\n      node => node.expandable,\n    )\n\n    this.treeFlattener = new MatTreeFlattener(\n      this._transformer,\n      node => node.level,\n      node => node.expandable,\n      node => node.children,\n    )\n\n    this.store.onInvalidNodeChange.subscribe(v => {\n      this.invalidIds = v\n      this.expandNodesById(v)\n    })\n    this.dataSource = new MatTreeFlatDataSource(this.treeControl, this.treeFlattener)\n\n    this.store.treeStructureChange.subscribe(data => {\n      this.dataSource.data = [data as IContentNode]\n      if (this.parentNodeId === this.store.currentParentNode) {\n        this.expandNodesById([this.parentNodeId])\n        if (this.selectedNode && !this.store.flatNodeMap.get(this.selectedNode)) {\n          this.parentHierarchy.forEach(v => {\n            if (this.store.flatNodeMap.get(v)) {\n              const identifier = this.store.uniqueIdMap.get(v) as string\n              this.selectedNode = v\n              this.editorStore.currentContent = identifier\n              this.store.currentSelectedNode = v\n              this.editorStore.changeActiveCont.next(identifier)\n              return\n            }\n          })\n        }\n      } else {\n        this.parentNodeId = this.store.currentParentNode\n      }\n    })\n    this.store.selectedNodeChange.subscribe(data => {\n      if (data) {\n        this.selectedNode = data\n      }\n    })\n    this.mediumSizeBreakpoint$.subscribe(isLtMedium => {\n      this.mediumScreen = isLtMedium\n      if (isLtMedium) {\n        this.drawer = true\n        this.leftarrow = false\n        this.menubtn = false\n      } else {\n        this.leftarrow = true\n        this.menubtn = true\n      }\n    })\n  }\n\n  ngAfterViewInit() {\n   if ($('#cdk-drop-list-0 > mat-tree-node').hasClass('selected') === false) {\n      $('#cdk-drop-list-0 > mat-tree-node:nth-child(2)').trigger('click')\n      $('#cdk-drop-list-0 > mat-tree-node:nth-child(2)').find('button.mat-icon-button').trigger('click')\n   }\n  }\n  ngOnDestroy() {\n    this.loaderService.changeLoad.next(false)\n  }\n\n  onNodeSelect(node: IContentTreeNode) {\n    if ($('#cdk-drop-list-0 > mat-tree-node').hasClass('selected')) {\n      $('#cdk-drop-list-0 > mat-tree-node:nth-child(2)').removeClass('selected')\n   }\n\n    if (node.id !== this.selectedNode) {\n      this.action.emit({ type: 'editContent', identifier: node.identifier, nodeClicked: true })\n      this.selectedNode = node.id\n      this.editorStore.currentContent = node.identifier\n      this.store.currentSelectedNode = node.id\n      this.editorStore.changeActiveCont.next(node.identifier)\n\n     }\n  }\n\n  closeSidenav() {\n    this.closeEvent.emit(true)\n  }\n\n  dragStart(node: IContentTreeNode) {\n    this.isDragging = true\n    this.dragContainer = node\n  }\n\n  dragEnd() {\n    this.backUpInformation = {\n      isDragging: this.isDragging,\n      dropContainer: this.dropContainer,\n      dragContainer: this.dragContainer,\n      draggingPosition: this.draggingPosition,\n    }\n    this.isDragging = false\n    this.dropContainer = null\n    this.dragContainer = null\n    this.draggingPosition = null\n  }\n\n  dragHover(node: IContentTreeNode, event: MouseEvent) {\n    event.preventDefault()\n    if (this.isDragging) {\n      this.dropContainer = node\n      clearTimeout(this.expandTimeout)\n      this.expandTimeout = setTimeout(() => {\n        this.treeControl.expand(node)\n        // tslint:disable-next-line: align\n      }, this.expandDelay)\n      const percentageY = event.offsetY / (event.target as any).clientHeight\n      if (percentageY >= 0 && percentageY < 0.2) {\n        this.draggingPosition = 'above'\n      } else if (percentageY > 0.8) {\n        this.draggingPosition = 'below'\n      } else if (percentageY >= 0.2 && percentageY <= 0.8) {\n        this.draggingPosition = 'center'\n      }\n      const parentHierarchy: number[] = []\n      let currNode: IContentTreeNode | null = node\n      while (currNode) {\n        if (currNode && currNode.parentId) {\n          parentHierarchy.push(currNode.parentId)\n        }\n        currNode = this.getParentNode(currNode)\n      }\n      if (parentHierarchy.includes((this.dragContainer as IContentTreeNode).id)) {\n        this.isDropDisabled = true\n      } else if (this.dragContainer === this.dropContainer) {\n        this.isDropDisabled = true\n      } else if (['above', 'below'].includes(this.draggingPosition as string)) {\n        const parentNode = this.getParentNode(node)\n        this.isDropDisabled = !parentNode\n          ? true\n          : !this.store.allowDrop(\n              this.dragContainer as IContentTreeNode,\n              parentNode as IContentTreeNode,\n            )\n      } else {\n        this.isDropDisabled = !this.store.allowDrop(\n          this.dragContainer as IContentTreeNode,\n          this.dropContainer as IContentTreeNode,\n        )\n      }\n    }\n  }\n\n  dragHoverEnd($event: Event) {\n    $event.preventDefault()\n    if (this.isDragging) {\n      clearTimeout(this.expandTimeout)\n      this.backUpInformation.dropContainer = this.dropContainer as any\n      this.dropContainer = null\n    }\n  }\n\n  drop() {\n    this.isDragging = false\n    if (!this.isDropDisabled) {\n      this.preserveExpandedNodes()\n      const isAdjacentDrop = ['above', 'below'].includes(\n        this.backUpInformation.draggingPosition as string,\n      )\n      const dropContainer = isAdjacentDrop\n        ? this.getParentNode(this.backUpInformation.dropContainer as IContentTreeNode)\n        : this.backUpInformation.dropContainer\n\n      if (dropContainer.id !== this.backUpInformation.dragContainer.id) {\n        this.store.dragAndDrop(\n          this.backUpInformation.dragContainer as IContentTreeNode,\n          dropContainer as IContentTreeNode,\n          isAdjacentDrop ? this.backUpInformation.dropContainer.id : undefined,\n          this.backUpInformation.draggingPosition,\n        )\n      }\n    }\n  }\n\n  preserveExpandedNodes() {\n    this.expandedNodes = new Set<number>()\n    this.treeControl.dataNodes.forEach(v => {\n      if (this.treeControl.isExpandable(v) && this.treeControl.isExpanded(v)) {\n        this.expandedNodes.add(v.id)\n      }\n    })\n  }\n\n  expandNodesById(ids?: number[]) {\n    const idSet = ids ? new Set(ids) : this.expandedNodes\n    this.treeControl.dataNodes.forEach(node => {\n      if (idSet.has(node.id)) {\n        this.treeControl.expand(node)\n        let parent = this.getParentNode(node)\n        while (parent) {\n          this.treeControl.expand(parent)\n          parent = this.getParentNode(parent)\n        }\n      }\n    })\n  }\n  /*\n   Get the parent node of a node\n    */\n  getParentNode(node: IContentTreeNode): IContentTreeNode | null {\n    const currentLevel = node.level\n\n    if (currentLevel < 1) {\n      return null\n    }\n\n    const startIndex = this.treeControl.dataNodes.indexOf(node) - 1\n\n    for (let i = startIndex; i >= 0; i = i - 1) {\n      const currentNode = this.treeControl.dataNodes[i]\n\n      if (currentNode.level < currentLevel) {\n        return currentNode\n      }\n    }\n    return null\n  }\n\n  delete(node: IContentTreeNode) {\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      width: '500px',\n      height: '175px',\n      data: 'deleteTreeNode',\n    })\n    this.preserveExpandedNodes()\n    dialogRef.afterClosed().subscribe(confirm => {\n      if (confirm) {\n        this.parentHierarchy = []\n        let currNode: IContentTreeNode | null = node\n        while (currNode) {\n          if (currNode && currNode.parentId) {\n            this.parentHierarchy.push(currNode.parentId)\n          }\n          currNode = this.getParentNode(currNode)\n        }\n        this.store.deleteNode(node.id)\n        this.snackBar.openFromComponent(NotificationComponent, {\n          data: {\n            type: Notify.SUCCESS,\n          },\n          duration: NOTIFICATION_TIME * 1000,\n        })\n      }\n    })\n  }\n\n  async addChildOrSibling(node: IContentTreeNode, asSibling = false) {\n    const children = (node.children || []).map(v => this.store.uniqueIdMap.get(v))\n    const dialogRef = this.dialog.open(AuthPickerComponent, {\n      width: '90vw',\n      height: '90vh',\n      data: {\n        filter: this.authInitService.collectionConfig.childrenConfig[node.category].searchFilter,\n        selectedIds: children,\n      },\n    })\n    this.preserveExpandedNodes()\n    dialogRef.afterClosed().subscribe(async (contents: string[]) => {\n      if (contents && contents.length) {\n        const parentNode = (asSibling ? this.getParentNode(node) : node) as IContentTreeNode\n        this.expandedNodes.add(parentNode.id)\n        this.loaderService.changeLoad.next(true)\n        const isDone = await this.store.addChildOrSibling(\n          contents,\n          parentNode,\n          asSibling ? node.id : undefined,\n          'below',\n        )\n        this.loaderService.changeLoad.next(false)\n        this.snackBar.openFromComponent(NotificationComponent, {\n          data: {\n            type: isDone ? Notify.SUCCESS : Notify.FAIL,\n          },\n          duration: NOTIFICATION_TIME * 1000,\n        })\n      }\n    })\n  }\n\n  async createNewChildOrSibling(type: string, node: IContentTreeNode, asSibling = false) {\n    const parentNode = (asSibling ? this.getParentNode(node) : node) as IContentTreeNode\n    this.loaderService.changeLoad.next(true)\n    this.preserveExpandedNodes()\n    this.expandedNodes.add(parentNode.id)\n\n    const isDone = await this.store.createChildOrSibling(\n      type,\n      parentNode,\n      asSibling ? node.id : undefined,\n      'below',\n      {},\n      type === 'web' ? 'link' : ''\n    )\n\n    this.snackBar.openFromComponent(NotificationComponent, {\n      data: {\n        type: isDone ? Notify.SUCCESS : Notify.FAIL,\n      },\n      duration: NOTIFICATION_TIME * 1000,\n    })\n    this.loaderService.changeLoad.next(false)\n  }\n\n  takeAction(action: string, node: IContentTreeNode, type?: string) {\n\n    switch (action) {\n      case 'editMeta':\n      case 'editContent':\n      case 'preview':\n        this.onNodeSelect(node)\n        this.action.emit({ type: action, identifier: node.identifier })\n        break\n      case 'delete':\n        this.delete(node)\n        break\n\n      case 'addChild':\n        this.addChildOrSibling(node)\n        break\n\n      case 'addSibling':\n        this.addChildOrSibling(node, true)\n        break\n\n      case 'createChild':\n        this.createNewChildOrSibling(type as string, node)\n        break\n\n      case 'createSibling':\n        this.createNewChildOrSibling(type as string, node, true)\n        break\n\n      default:\n        break\n    }\n  }\n  addChapter() {\n    // tslint:disable-next-line:max-line-length\n    // this.allowedChild = [{\"children\":[],\"id\":\"upload\",\"name\":\"Upload Content\",\"icon\":\"cloud_upload\"},{\"children\":[],\"id\":\"assessment\",\"name\":\"Assessment\",\"icon\":\"check_circle\"},{\"children\":[],\"id\":\"web\",\"name\":\"Attach a Link\",\"icon\":\"link\"}]\n\n    // this.action.emit({ type: 'showAddChapter', identifier: '' })\n  }\n}\n","export default \".mat-sidenav-container {\\n  min-height: 650px;\\n  overflow: unset;\\n}\\n\\n.mat-sidenav {\\n  overflow: unset;\\n}\\n\\n.mat-drawer-content {\\n  padding-left: 3px;\\n}\\n\\n.sticky {\\n  position: -webkit-sticky;\\n  position: sticky;\\n  top: 50px;\\n}\\n\\n.close-preview {\\n  position: fixed;\\n  top: 15px;\\n  left: 15px;\\n  z-index: 1;\\n  font-size: 30px;\\n  cursor: pointer;\\n  z-index: 1001;\\n}\\n\\n.hidden {\\n  display: none;\\n}\\n\\n.transitionD {\\n  transition: all 0.5s;\\n}\\n\\n.ui {\\n  border: 1px solid #1a1919;\\n  border-top-left-radius: 0px;\\n  border-left-color: white;\\n  border-bottom-left-radius: 0px;\\n  border-top-right-radius: 50%;\\n  border-bottom-right-radius: 50%;\\n  box-shadow: 0.1px 2px 8px grey;\\n  width: 42px;\\n}\\n\\n.toHide {\\n  visibility: hidden;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3NvbmFzaGFqdS9WaWRlb3Mvc3BoZXJlLW1vYmlsZS9wcm9qZWN0L3dzL2F1dGhvci9zcmMvbGliL3JvdXRpbmcvbW9kdWxlcy9lZGl0b3Ivcm91dGluZy9tb2R1bGVzL2NvbGxlY3Rpb24vY29tcG9uZW50cy9jb2xsZWN0aW9uL2NvbGxlY3Rpb24uY29tcG9uZW50LnNjc3MiLCJwcm9qZWN0L3dzL2F1dGhvci9zcmMvbGliL3JvdXRpbmcvbW9kdWxlcy9lZGl0b3Ivcm91dGluZy9tb2R1bGVzL2NvbGxlY3Rpb24vY29tcG9uZW50cy9jb2xsZWN0aW9uL2NvbGxlY3Rpb24uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0E7RUFDRSxpQkFBQTtFQUNBLGVBQUE7QUNGRjs7QURLQTtFQUNFLGVBQUE7QUNGRjs7QURLQTtFQUNFLGlCQUFBO0FDRkY7O0FES0E7RUFDRSx3QkFBQTtFQUFBLGdCQUFBO0VBQ0EsU0FBQTtBQ0ZGOztBREtBO0VBQ0UsZUFBQTtFQUNBLFNBQUE7RUFDQSxVQUFBO0VBQ0EsVUFBQTtFQUNBLGVBQUE7RUFDQSxlQUFBO0VBQ0EsYUFBQTtBQ0ZGOztBREtBO0VBQ0UsYUFBQTtBQ0ZGOztBRElBO0VBQ0Usb0JBQUE7QUNERjs7QURHQTtFQUNFLHlCQUFBO0VBQ0EsMkJBQUE7RUFDQSx3QkFBQTtFQUNBLDhCQUFBO0VBQ0EsNEJBQUE7RUFDQSwrQkFBQTtFQUNBLDhCQUFBO0VBQ0EsV0FBQTtBQ0FGOztBREdBO0VBQ0Usa0JBQUE7QUNBRiIsImZpbGUiOiJwcm9qZWN0L3dzL2F1dGhvci9zcmMvbGliL3JvdXRpbmcvbW9kdWxlcy9lZGl0b3Ivcm91dGluZy9tb2R1bGVzL2NvbGxlY3Rpb24vY29tcG9uZW50cy9jb2xsZWN0aW9uL2NvbGxlY3Rpb24uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0ICdzdHlsZXMvX3dzLXZhcnMuc2Nzcyc7XG5AaW1wb3J0ICdzdHlsZXMvX3dzLW1peGlucy5zY3NzJztcblxuLm1hdC1zaWRlbmF2LWNvbnRhaW5lciB7XG4gIG1pbi1oZWlnaHQ6IDY1MHB4O1xuICBvdmVyZmxvdzogdW5zZXQ7XG59XG5cbi5tYXQtc2lkZW5hdiB7XG4gIG92ZXJmbG93OiB1bnNldDtcbn1cblxuLm1hdC1kcmF3ZXItY29udGVudCB7XG4gIHBhZGRpbmctbGVmdDogM3B4O1xufVxuXG4uc3RpY2t5IHtcbiAgcG9zaXRpb246IHN0aWNreTtcbiAgdG9wOiA1MHB4O1xufVxuXG4uY2xvc2UtcHJldmlldyB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgdG9wOiAxNXB4O1xuICBsZWZ0OiAxNXB4O1xuICB6LWluZGV4OiAxO1xuICBmb250LXNpemU6IDMwcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgei1pbmRleDogMTAwMTtcbn1cblxuLmhpZGRlbiB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG4udHJhbnNpdGlvbkQge1xuICB0cmFuc2l0aW9uOiBhbGwgMC41cztcbn1cbi51aSB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYigyNiwgMjUsIDI1KTtcbiAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMHB4O1xuICBib3JkZXItbGVmdC1jb2xvcjogd2hpdGU7XG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDBweDtcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDUwJTtcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDUwJTtcbiAgYm94LXNoYWRvdzogMC4xcHggMnB4IDhweCBncmV5O1xuICB3aWR0aDogNDJweDtcbn1cblxuLnRvSGlkZSB7XG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcbn1cbiIsIi5tYXQtc2lkZW5hdi1jb250YWluZXIge1xuICBtaW4taGVpZ2h0OiA2NTBweDtcbiAgb3ZlcmZsb3c6IHVuc2V0O1xufVxuXG4ubWF0LXNpZGVuYXYge1xuICBvdmVyZmxvdzogdW5zZXQ7XG59XG5cbi5tYXQtZHJhd2VyLWNvbnRlbnQge1xuICBwYWRkaW5nLWxlZnQ6IDNweDtcbn1cblxuLnN0aWNreSB7XG4gIHBvc2l0aW9uOiBzdGlja3k7XG4gIHRvcDogNTBweDtcbn1cblxuLmNsb3NlLXByZXZpZXcge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRvcDogMTVweDtcbiAgbGVmdDogMTVweDtcbiAgei1pbmRleDogMTtcbiAgZm9udC1zaXplOiAzMHB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHotaW5kZXg6IDEwMDE7XG59XG5cbi5oaWRkZW4ge1xuICBkaXNwbGF5OiBub25lO1xufVxuXG4udHJhbnNpdGlvbkQge1xuICB0cmFuc2l0aW9uOiBhbGwgMC41cztcbn1cblxuLnVpIHtcbiAgYm9yZGVyOiAxcHggc29saWQgIzFhMTkxOTtcbiAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMHB4O1xuICBib3JkZXItbGVmdC1jb2xvcjogd2hpdGU7XG4gIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDBweDtcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDUwJTtcbiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDUwJTtcbiAgYm94LXNoYWRvdzogMC4xcHggMnB4IDhweCBncmV5O1xuICB3aWR0aDogNDJweDtcbn1cblxuLnRvSGlkZSB7XG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcbn0iXX0= */\"","import { DeleteDialogComponent } from '@ws/author/src/lib/modules/shared/components/delete-dialog/delete-dialog.component'\nimport { Component, OnDestroy, OnInit } from '@angular/core'\nimport { FormGroup } from '@angular/forms'\nimport { MatDialog, MatSnackBar } from '@angular/material'\nimport { ActivatedRoute, Router } from '@angular/router'\nimport { NOTIFICATION_TIME } from '@ws/author/src/lib/constants/constant'\nimport { Notify } from '@ws/author/src/lib/constants/notificationMessage'\nimport { IActionButton, IActionButtonConfig } from '@ws/author/src/lib/interface/action-button'\nimport { NSApiRequest } from '@ws/author/src/lib/interface/apiRequest'\nimport { IAuthSteps } from '@ws/author/src/lib/interface/auth-stepper'\nimport { NSContent } from '@ws/author/src/lib/interface/content'\nimport { CommentsDialogComponent } from '@ws/author/src/lib/modules/shared/components/comments-dialog/comments-dialog.component'\nimport { ConfirmDialogComponent } from '@ws/author/src/lib/modules/shared/components/confirm-dialog/confirm-dialog.component'\nimport { ErrorParserComponent } from '@ws/author/src/lib/modules/shared/components/error-parser/error-parser.component'\nimport { NotificationComponent } from '@ws/author/src/lib/modules/shared/components/notification/notification.component'\nimport { EditorContentService } from '@ws/author/src/lib/routing/modules/editor/services/editor-content.service'\nimport { EditorService } from '@ws/author/src/lib/routing/modules/editor/services/editor.service'\nimport { AuthInitService } from '@ws/author/src/lib/services/init.service'\nimport { LoaderService } from '@ws/author/src/lib/services/loader.service'\nimport { of, Subscription } from 'rxjs'\nimport { map, mergeMap, tap, catchError } from 'rxjs/operators'\nimport { IContentNode } from '../../interface/icontent-tree'\nimport { CollectionResolverService } from './../../services/resolver.service'\nimport { CollectionStoreService } from './../../services/store.service'\nimport { VIEWER_ROUTE_FROM_MIME } from '@ws-widget/collection'\nimport { NotificationService } from '@ws/author/src/lib/services/notification.service'\nimport { AccessControlService } from '@ws/author/src/lib/modules/shared/services/access-control.service'\nimport { BreakpointObserver, Breakpoints, BreakpointState } from '@angular/cdk/layout'\n\n/**\n * @description\n * Parent component for the Collection editor. All the child component are loaded here. It decides the flow and the logic and\n * controls the api calls that are made for save and send for review and other\n *\n * @export\n * @class CollectionComponent\n * @implements {OnInit}\n */\n\n@Component({\n  selector: 'ws-auth-collection',\n  templateUrl: './collection.component.html',\n  styleUrls: ['./collection.component.scss'],\n  providers: [CollectionStoreService, CollectionResolverService],\n})\nexport class CollectionComponent implements OnInit, OnDestroy {\n  contents: NSContent.IContentMeta[] = []\n  currentParentId!: string\n  stepper: IAuthSteps[] = [\n    { title: 'Choose Type', disabled: true },\n    { title: 'Content', disabled: false },\n    { title: 'Details', disabled: false },\n  ]\n  isSubmitPressed = false\n  showLanguageBar = false\n  actionButton: IActionButtonConfig | null = null\n  currentStep = 1\n  currentContent!: string\n  activeContentSubscription: Subscription | null = null\n  routerSubscription: Subscription | null = null\n  isChanged = false\n  previewIdentifier: string | null = null\n  viewMode = 'meta'\n  mimeTypeRoute = ''\n\n  mediumScreen = false\n  sideBarOpened = false\n  mediumSizeBreakpoint$ = this.breakpointObserver\n    .observe([Breakpoints.XSmall, Breakpoints.Small])\n    .pipe(map((res: BreakpointState) => res.matches))\n  mode$ = this.mediumSizeBreakpoint$.pipe(map(isMedium => (isMedium ? 'over' : 'side')))\n  leftArrow = true\n\n  constructor(\n    private contentService: EditorContentService,\n    private activateRoute: ActivatedRoute,\n    private storeService: CollectionStoreService,\n    private resolverService: CollectionResolverService,\n    private initService: AuthInitService,\n    private loaderService: LoaderService,\n    private dialog: MatDialog,\n    private snackBar: MatSnackBar,\n    private editorService: EditorService,\n    private router: Router,\n    private notificationSvc: NotificationService,\n    private accessControlSvc: AccessControlService,\n    private breakpointObserver: BreakpointObserver,\n  ) {}\n\n  ngOnInit() {\n    this.contentService.changeActiveCont.subscribe(data => {\n      this.currentContent = data\n      if (this.contentService.getUpdatedMeta(data).contentType !== 'Resource') {\n        this.viewMode = 'meta'\n      }\n    })\n    if (this.activateRoute.parent && this.activateRoute.parent.parent) {\n      this.routerSubscription = this.activateRoute.parent.parent.data.subscribe(data => {\n        const contentDataMap = new Map<string, NSContent.IContentMeta>()\n        data.contents.map((v: { content: NSContent.IContentMeta; data: any }) => {\n          this.storeService.parentNode.push(v.content.identifier)\n          this.resolverService.buildTreeAndMap(\n            v.content,\n            contentDataMap,\n            this.storeService.flatNodeMap,\n            this.storeService.uniqueIdMap,\n            this.storeService.lexIdMap,\n          )\n        })\n        contentDataMap.forEach(content => this.contentService.setOriginalMeta(content))\n        const currentNode = (this.storeService.lexIdMap.get(this.currentContent) as number[])[0]\n        this.currentParentId = this.currentContent\n        this.storeService.treeStructureChange.next(\n          this.storeService.flatNodeMap.get(currentNode) as IContentNode,\n        )\n        this.storeService.currentParentNode = currentNode\n        this.storeService.currentSelectedNode = currentNode\n        this.storeService.selectedNodeChange.next(currentNode)\n      })\n    }\n    this.stepper = this.initService.collectionConfig.stepper\n    this.showLanguageBar = this.initService.collectionConfig.languageBar\n    const actionButton: IActionButton[] = []\n    this.initService.collectionConfig.actionButtons.buttons.forEach(action => {\n      if (\n        this.contentService.checkConditionV2(\n          this.contentService.getOriginalMeta(this.currentParentId),\n          action.conditions,\n        )\n      ) {\n        actionButton.push({\n          title: action.title,\n          icon: action.icon,\n          event: action.event,\n          conditions: action.conditions,\n        })\n      }\n    })\n    this.actionButton = {\n      enabled: this.initService.collectionConfig.actionButtons.enabled,\n      buttons: actionButton,\n    }\n    this.mediumSizeBreakpoint$.subscribe(isLtMedium => {\n      this.mediumScreen = isLtMedium\n      this.sideBarOpened = !isLtMedium\n    })\n  }\n\n  ngOnDestroy() {\n    this.loaderService.changeLoad.next(false)\n  }\n\n  sidenavClose() {\n    setTimeout(() => (this.leftArrow = true), 500)\n  }\n\n  save(nextAction?: string) {\n    const updatedContent = this.contentService.upDatedContent || {}\n    if (\n      Object.keys(updatedContent).length ||\n      Object.keys(this.storeService.changedHierarchy).length\n    ) {\n      this.isChanged = true\n      this.loaderService.changeLoad.next(true)\n      this.triggerSave().subscribe(\n        () => {\n          if (nextAction) {\n            this.action(nextAction)\n          }\n          this.loaderService.changeLoad.next(false)\n          this.snackBar.openFromComponent(NotificationComponent, {\n            data: {\n              type: Notify.SAVE_SUCCESS,\n            },\n            duration: NOTIFICATION_TIME * 1000,\n          })\n        },\n        (error: any) => {\n          if (error.status === 409) {\n            const errorMap = new Map<string, NSContent.IContentMeta>()\n            Object.keys(this.contentService.originalContent).forEach(v =>\n              errorMap.set(v, this.contentService.originalContent[v]),\n            )\n            const dialog = this.dialog.open(ErrorParserComponent, {\n              width: '80vw',\n              height: '90vh',\n              data: {\n                errorFromBackendData: error.error,\n                dataMapping: errorMap,\n              },\n            })\n            dialog.afterClosed().subscribe(v => {\n              if (v) {\n                if (typeof v === 'string') {\n                  this.storeService.selectedNodeChange.next(\n                    (this.storeService.lexIdMap.get(v) as number[])[0],\n                  )\n                  this.contentService.changeActiveCont.next(v)\n                } else {\n                  this.storeService.selectedNodeChange.next(v)\n                  this.contentService.changeActiveCont.next(\n                    this.storeService.uniqueIdMap.get(v) as string,\n                  )\n                }\n              }\n            })\n          }\n          this.loaderService.changeLoad.next(false)\n          this.snackBar.openFromComponent(NotificationComponent, {\n            data: {\n              type: Notify.SAVE_FAIL,\n            },\n            duration: NOTIFICATION_TIME * 1000,\n          })\n        },\n      )\n    } else {\n      if (nextAction) {\n        this.action(nextAction)\n      } else {\n        this.snackBar.openFromComponent(NotificationComponent, {\n          data: {\n            type: Notify.UP_TO_DATE,\n          },\n          duration: NOTIFICATION_TIME * 1000,\n        })\n      }\n    }\n  }\n\n  get validationCheck(): boolean {\n    const currentNodeId = this.storeService.lexIdMap.get(this.currentParentId) as number[]\n    const returnValue = this.storeService.validationCheck(currentNodeId[0])\n    if (returnValue) {\n      const dialog = this.dialog.open(ErrorParserComponent, {\n        width: '80vw',\n        height: '90vh',\n        data: {\n          processErrorData: returnValue,\n        },\n      })\n      dialog.afterClosed().subscribe(v => {\n        if (v) {\n          if (typeof v === 'string') {\n            this.storeService.selectedNodeChange.next(\n              (this.storeService.lexIdMap.get(v) as number[])[0],\n            )\n            this.contentService.changeActiveCont.next(v)\n          } else {\n            this.storeService.selectedNodeChange.next(v)\n            this.contentService.changeActiveCont.next(\n              this.storeService.uniqueIdMap.get(v) as string,\n            )\n          }\n        }\n      })\n      return false\n    }\n    return true\n  }\n\n  takeAction() {\n    this.isSubmitPressed = true\n    const needSave = Object.keys(this.contentService.upDatedContent || {}).length\n    if (!needSave && !this.isChanged) {\n      this.snackBar.openFromComponent(NotificationComponent, {\n        data: {\n          type: Notify.UP_TO_DATE,\n        },\n        duration: NOTIFICATION_TIME * 1000,\n      })\n      return\n    }\n    if (this.validationCheck) {\n      const dialogRef = this.dialog.open(CommentsDialogComponent, {\n        width: '750px',\n        height: '450px',\n        data: this.contentService.getOriginalMeta(this.currentParentId),\n      })\n\n      dialogRef.afterClosed().subscribe((commentsForm: FormGroup) => {\n        this.finalCall(commentsForm)\n      })\n    }\n  }\n\n  finalCall(commentsForm: FormGroup) {\n    if (commentsForm) {\n      const body: NSApiRequest.IForwardBackwardActionGeneral = {\n        comment: commentsForm.controls.comments.value,\n        operation:\n          commentsForm.controls.action.value === 'accept' ||\n          ['Draft', 'Live'].includes(\n            this.contentService.originalContent[this.currentParentId].status,\n          )\n            ? 1\n            : 0,\n      }\n      const updatedMeta = this.contentService.getUpdatedMeta(this.currentParentId)\n      const needSave =\n        Object.keys(this.contentService.upDatedContent || {}).length ||\n        Object.keys(this.storeService.changedHierarchy).length\n      const saveCall = (needSave ? this.triggerSave() : of({} as any)).pipe(\n        mergeMap(() =>\n          this.editorService\n            .forwardBackward(\n              body,\n              this.currentParentId,\n              this.contentService.originalContent[this.currentParentId].status,\n            )\n            .pipe(\n              mergeMap(() =>\n                this.notificationSvc\n                  .triggerPushPullNotification(\n                    updatedMeta,\n                    body.comment,\n                    body.operation ? true : false,\n                  )\n                  .pipe(\n                    catchError(() => {\n                      return of({} as any)\n                    }),\n                  ),\n              ),\n            ),\n        ),\n      )\n      this.loaderService.changeLoad.next(true)\n      saveCall.subscribe(\n        () => {\n          this.loaderService.changeLoad.next(false)\n          this.snackBar.openFromComponent(NotificationComponent, {\n            data: {\n              type: this.getMessage('success'),\n            },\n            duration: NOTIFICATION_TIME * 1000,\n          })\n          this.contents = this.contents.filter(v => v.identifier !== this.currentParentId)\n          if (this.contents.length) {\n            this.contentService.changeActiveCont.next(this.contents[0].identifier)\n          } else {\n            this.router.navigateByUrl('/author/home')\n          }\n        },\n        (error: any) => {\n          if (error.status === 409) {\n            const errorMap = new Map<string, NSContent.IContentMeta>()\n            Object.keys(this.contentService.originalContent).forEach(v =>\n              errorMap.set(v, this.contentService.originalContent[v]),\n            )\n            const dialog = this.dialog.open(ErrorParserComponent, {\n              width: '80vw',\n              height: '90vh',\n              data: {\n                errorFromBackendData: error.error,\n                dataMapping: errorMap,\n              },\n            })\n            dialog.afterClosed().subscribe(v => {\n              if (v) {\n                if (typeof v === 'string') {\n                  this.storeService.selectedNodeChange.next(\n                    (this.storeService.lexIdMap.get(v) as number[])[0],\n                  )\n                  this.contentService.changeActiveCont.next(v)\n                } else {\n                  this.storeService.selectedNodeChange.next(v)\n                  this.contentService.changeActiveCont.next(\n                    this.storeService.uniqueIdMap.get(v) as string,\n                  )\n                }\n              }\n            })\n          }\n          this.loaderService.changeLoad.next(false)\n          this.snackBar.openFromComponent(NotificationComponent, {\n            data: {\n              type: this.getMessage('failure'),\n            },\n            duration: NOTIFICATION_TIME * 1000,\n          })\n        },\n      )\n    }\n  }\n\n  preview(id: string) {\n    const updatedContent = this.contentService.upDatedContent || {}\n    const saveCall =\n      Object.keys(updatedContent).length || Object.keys(this.storeService.changedHierarchy).length\n        ? this.triggerSave()\n        : of({} as any)\n    this.loaderService.changeLoad.next(true)\n    saveCall.subscribe(\n      () => {\n        this.mimeTypeRoute = VIEWER_ROUTE_FROM_MIME(\n          this.contentService.getUpdatedMeta(id).mimeType as any,\n        )\n        this.loaderService.changeLoad.next(false)\n        this.previewIdentifier = id\n      },\n      error => {\n        if (error.status === 409) {\n          const errorMap = new Map<string, NSContent.IContentMeta>()\n          Object.keys(this.contentService.originalContent).forEach(v =>\n            errorMap.set(v, this.contentService.originalContent[v]),\n          )\n          const dialog = this.dialog.open(ErrorParserComponent, {\n            width: '750px',\n            height: '450px',\n            data: {\n              errorFromBackendData: error.error,\n              dataMapping: errorMap,\n            },\n          })\n          dialog.afterClosed().subscribe(v => {\n            if (v) {\n              if (typeof v === 'string') {\n                this.storeService.selectedNodeChange.next(\n                  (this.storeService.lexIdMap.get(v) as number[])[0],\n                )\n                this.contentService.changeActiveCont.next(v)\n              } else {\n                this.storeService.selectedNodeChange.next(v)\n                this.contentService.changeActiveCont.next(\n                  this.storeService.uniqueIdMap.get(v) as string,\n                )\n              }\n            }\n          })\n        }\n        this.loaderService.changeLoad.next(false)\n        this.snackBar.openFromComponent(NotificationComponent, {\n          data: {\n            type: Notify.SAVE_FAIL,\n          },\n          duration: NOTIFICATION_TIME * 1000,\n        })\n      },\n    )\n  }\n\n  closePreview() {\n    this.previewIdentifier = null\n  }\n\n  triggerSave() {\n    const nodesModified: any = {}\n    let isRootPresent = false\n    Object.keys(this.contentService.upDatedContent).forEach(v => {\n      if (!isRootPresent) {\n        isRootPresent = this.storeService.parentNode.includes(v)\n      }\n      nodesModified[v] = {\n        isNew: false,\n        root: this.storeService.parentNode.includes(v),\n        metadata: this.contentService.upDatedContent[v],\n      }\n    })\n    if (!isRootPresent) {\n      nodesModified[this.currentParentId] = {\n        isNew: false,\n        root: true,\n        metadata: {},\n      }\n    }\n    const requestBody: NSApiRequest.IContentUpdate = {\n      nodesModified,\n      hierarchy: this.storeService.changedHierarchy,\n    }\n    return this.editorService.updateContentV2(requestBody).pipe(\n      tap(() => {\n        this.storeService.changedHierarchy = {}\n        Object.keys(this.contentService.upDatedContent).forEach(id => {\n          this.contentService.resetOriginalMeta(this.contentService.upDatedContent[id], id)\n        })\n        this.contentService.upDatedContent = {}\n      }),\n    )\n  }\n\n  getMessage(type: 'success' | 'failure') {\n    if (type === 'success') {\n      switch (this.contentService.originalContent[this.currentParentId].status) {\n        case 'Draft':\n        case 'Live':\n          return Notify.SEND_FOR_REVIEW_SUCCESS\n        case 'InReview':\n          return Notify.REVIEW_SUCCESS\n        case 'Reviewed':\n          return Notify.PUBLISH_SUCCESS\n        default:\n          return ''\n      }\n    }\n    switch (this.contentService.originalContent[this.currentParentId].status) {\n      case 'Draft':\n      case 'Live':\n        return Notify.SEND_FOR_REVIEW_FAIL\n      case 'InReview':\n        return Notify.REVIEW_FAIL\n      case 'Reviewed':\n        return Notify.PUBLISH_FAIL\n      default:\n        return ''\n    }\n  }\n\n  subAction(event: { type: string; identifier: string }) {\n    this.contentService.changeActiveCont.next(event.identifier)\n    switch (event.type) {\n      case 'editMeta':\n        this.viewMode = 'meta'\n        break\n      case 'editContent':\n        const content = this.contentService.getUpdatedMeta(event.identifier)\n        if (['application/pdf', 'application/x-mpegURL'].includes(content.mimeType)) {\n          this.viewMode = 'upload'\n        } else if (content.mimeType === 'application/html' && !content.isExternal) {\n          this.viewMode = 'upload'\n        } else if (content.mimeType === 'application/html') {\n          this.viewMode = 'curate'\n        }\n        break\n      case 'preview':\n        this.preview(event.identifier)\n        break\n    }\n  }\n\n  action(type: string) {\n    switch (type) {\n      case 'next':\n        this.viewMode = 'meta'\n        break\n\n      case 'save':\n        this.save()\n        break\n\n      case 'saveAndNext':\n        this.save('next')\n        break\n\n      case 'preview':\n        this.preview(this.currentContent)\n        break\n\n      case 'push':\n        if (this.getAction() === 'publish') {\n          const dialogRefForPublish = this.dialog.open(ConfirmDialogComponent, {\n            width: '70%',\n            data: 'publishMessage',\n          })\n          dialogRefForPublish.afterClosed().subscribe(result => {\n            if (result) {\n              this.takeAction()\n            }\n          })\n        } else {\n          this.takeAction()\n        }\n        break\n\n      case 'delete':\n        const dialog = this.dialog.open(DeleteDialogComponent, {\n          width: '600px',\n          height: 'auto',\n          data: this.contentService.getUpdatedMeta(this.currentParentId),\n        })\n        dialog.afterClosed().subscribe(confirm => {\n          if (confirm) {\n            this.contents = this.contents.filter(v => v.identifier !== this.currentParentId)\n            if (this.contents.length) {\n              this.contentService.changeActiveCont.next(this.contents[0].identifier)\n            } else {\n              this.router.navigateByUrl('/author/home')\n            }\n          }\n        })\n        break\n\n      case 'fullscreen':\n        this.fullScreenToggle()\n        break\n\n      case 'close':\n        this.router.navigateByUrl('/author/home')\n        break\n    }\n  }\n\n  delete() {\n    this.loaderService.changeLoad.next(true)\n    this.editorService.deleteContent(this.currentParentId).subscribe(\n      () => {\n        this.loaderService.changeLoad.next(false)\n        this.snackBar.openFromComponent(NotificationComponent, {\n          data: {\n            type: Notify.SUCCESS,\n          },\n          duration: NOTIFICATION_TIME * 1000,\n        })\n        this.contents = this.contents.filter(v => v.identifier !== this.currentParentId)\n        if (this.contents.length) {\n          this.contentService.changeActiveCont.next(this.contents[0].identifier)\n        } else {\n          this.router.navigateByUrl('/author/home')\n        }\n      },\n      error => {\n        if (error.status === 409) {\n          const errorMap = new Map<string, NSContent.IContentMeta>()\n          Object.keys(this.contentService.originalContent).forEach(v =>\n            errorMap.set(v, this.contentService.originalContent[v]),\n          )\n          const dialog = this.dialog.open(ErrorParserComponent, {\n            width: '750px',\n            height: '450px',\n            data: {\n              errorFromBackendData: error.error,\n              dataMapping: errorMap,\n            },\n          })\n          dialog.afterClosed().subscribe(v => {\n            if (v) {\n              if (typeof v === 'string') {\n                this.storeService.selectedNodeChange.next(\n                  (this.storeService.lexIdMap.get(v) as number[])[0],\n                )\n                this.contentService.changeActiveCont.next(v)\n              } else {\n                this.storeService.selectedNodeChange.next(v)\n                this.contentService.changeActiveCont.next(\n                  this.storeService.uniqueIdMap.get(v) as string,\n                )\n              }\n            }\n          })\n        }\n        this.loaderService.changeLoad.next(false)\n        this.snackBar.openFromComponent(NotificationComponent, {\n          data: {\n            type: Notify.CONTENT_FAIL,\n          },\n          duration: NOTIFICATION_TIME * 1000,\n        })\n      },\n    )\n  }\n\n  fullScreenToggle = () => {\n    const doc: any = document\n    const elm: any = doc.getElementById('auth-toc')\n    if (elm.requestFullscreen) {\n      !doc.fullscreenElement ? elm.requestFullscreen() : doc.exitFullscreen()\n    } else if (elm.mozRequestFullScreen) {\n      !doc.mozFullScreen ? elm.mozRequestFullScreen() : doc.mozCancelFullScreen()\n    } else if (elm.msRequestFullscreen) {\n      !doc.msFullscreenElement ? elm.msRequestFullscreen() : doc.msExitFullscreen()\n    } else if (elm.webkitRequestFullscreen) {\n      !doc.webkitIsFullscreen ? elm.webkitRequestFullscreen() : doc.webkitCancelFullscreen()\n    }\n  }\n\n  getAction(): string {\n    switch (this.contentService.originalContent[this.currentParentId].status) {\n      case 'Draft':\n      case 'Live':\n        return 'sendForReview'\n      case 'InReview':\n        return 'review'\n      case 'Reviewed':\n        return 'publish'\n      default:\n        return 'sendForReview'\n    }\n  }\n\n  canDelete() {\n    return (\n      this.accessControlSvc.hasRole(['editor', 'admin']) ||\n      (['Draft', 'Live'].includes(\n        this.contentService.originalContent[this.currentParentId].status,\n      ) &&\n        this.contentService.originalContent[this.currentParentId].creatorContacts.find(\n          v => v.id === this.accessControlSvc.userId,\n        ))\n    )\n  }\n}\n","export default \".example-container {\\n  height: 100vh;\\n}\\n\\n::ng-deep #auth-toc .mat-drawer-inner-container {\\n  min-width: 250px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3NvbmFzaGFqdS9WaWRlb3Mvc3BoZXJlLW1vYmlsZS9wcm9qZWN0L3dzL2F1dGhvci9zcmMvbGliL3JvdXRpbmcvbW9kdWxlcy9lZGl0b3Ivcm91dGluZy9tb2R1bGVzL2NvbGxlY3Rpb24vY29tcG9uZW50cy9jb3Vyc2UtY29sbGVjdGlvbi9jb3Vyc2UtY29sbGVjdGlvbi5jb21wb25lbnQuc2NzcyIsInByb2plY3Qvd3MvYXV0aG9yL3NyYy9saWIvcm91dGluZy9tb2R1bGVzL2VkaXRvci9yb3V0aW5nL21vZHVsZXMvY29sbGVjdGlvbi9jb21wb25lbnRzL2NvdXJzZS1jb2xsZWN0aW9uL2NvdXJzZS1jb2xsZWN0aW9uLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksYUFBQTtBQ0NKOztBRHFCSTtFQUNFLGdCQUFBO0FDbEJOIiwiZmlsZSI6InByb2plY3Qvd3MvYXV0aG9yL3NyYy9saWIvcm91dGluZy9tb2R1bGVzL2VkaXRvci9yb3V0aW5nL21vZHVsZXMvY29sbGVjdGlvbi9jb21wb25lbnRzL2NvdXJzZS1jb2xsZWN0aW9uL2NvdXJzZS1jb2xsZWN0aW9uLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmV4YW1wbGUtY29udGFpbmVyIHtcbiAgICBoZWlnaHQ6IDEwMHZoO1xufVxuXG4vLyAub3V0ZXItZmxleCB7XG4vLyAgICAgZGlzcGxheTogZmxleDtcbi8vICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbi8vIH1cbi8vIC5jb250ZW50LWJveCB7XG4vLyAgICAgd2lkdGg6IDczJTtcbi8vIH1cbi8vIC5zaWRlYmFyIHtcbi8vICAgICB3aWR0aDogMjMlO1xuLy8gICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbi8vICAgICB0b3A6IC0zN3B4O1xuLy8gICAgIGJvdHRvbTogMDtcbi8vICAgICByaWdodDogMDtcbi8vICAgICBwYWRkaW5nLXJpZ2h0OiAxZW07XG4vLyAgICAgYmFja2dyb3VuZDogI2ZmZjtcbi8vICAgICBwYWRkaW5nLXRvcDogM2VtO1xuLy8gfVxuXG46Om5nLWRlZXAgI2F1dGgtdG9jIHtcbiAgICAubWF0LWRyYXdlci1pbm5lci1jb250YWluZXIge1xuICAgICAgbWluLXdpZHRoOiAyNTBweDtcbiAgICB9XG4gIH1cbiIsIi5leGFtcGxlLWNvbnRhaW5lciB7XG4gIGhlaWdodDogMTAwdmg7XG59XG5cbjo6bmctZGVlcCAjYXV0aC10b2MgLm1hdC1kcmF3ZXItaW5uZXItY29udGFpbmVyIHtcbiAgbWluLXdpZHRoOiAyNTBweDtcbn0iXX0= */\"","import { DeleteDialogComponent } from '@ws/author/src/lib/modules/shared/components/delete-dialog/delete-dialog.component'\nimport { Component, OnDestroy, OnInit } from '@angular/core'\nimport { FormGroup, FormBuilder, FormControl, Validators } from '@angular/forms'\nimport { MatDialog, MatSnackBar } from '@angular/material'\nimport { ActivatedRoute, Router } from '@angular/router'\nimport { NOTIFICATION_TIME } from '@ws/author/src/lib/constants/constant'\nimport { Notify } from '@ws/author/src/lib/constants/notificationMessage'\nimport { IActionButton, IActionButtonConfig } from '@ws/author/src/lib/interface/action-button'\nimport { NSApiRequest } from '@ws/author/src/lib/interface/apiRequest'\nimport { IAuthSteps } from '@ws/author/src/lib/interface/auth-stepper'\nimport { NSContent } from '@ws/author/src/lib/interface/content'\nimport { CommentsDialogComponent } from '@ws/author/src/lib/modules/shared/components/comments-dialog/comments-dialog.component'\nimport { ConfirmDialogComponent } from '@ws/author/src/lib/modules/shared/components/confirm-dialog/confirm-dialog.component'\nimport { ErrorParserComponent } from '@ws/author/src/lib/modules/shared/components/error-parser/error-parser.component'\nimport { NotificationComponent } from '@ws/author/src/lib/modules/shared/components/notification/notification.component'\nimport { EditorContentService } from '@ws/author/src/lib/routing/modules/editor/services/editor-content.service'\nimport { EditorService } from '@ws/author/src/lib/routing/modules/editor/services/editor.service'\nimport { AuthInitService } from '@ws/author/src/lib/services/init.service'\nimport { LoaderService } from '@ws/author/src/lib/services/loader.service'\nimport { of, Subscription } from 'rxjs'\nimport { map, mergeMap, tap, catchError } from 'rxjs/operators'\nimport { IContentNode, IContentTreeNode } from '../../interface/icontent-tree'\nimport { CollectionResolverService } from './../../services/resolver.service'\nimport { CollectionStoreService } from './../../services/store.service'\nimport { VIEWER_ROUTE_FROM_MIME } from '@ws-widget/collection'\nimport { NotificationService } from '@ws/author/src/lib/services/notification.service'\nimport { AccessControlService } from '@ws/author/src/lib/modules/shared/services/access-control.service'\nimport { BreakpointObserver, Breakpoints, BreakpointState } from '@angular/cdk/layout'\n// import { HeaderServiceService } from './../../../../../../../../../../../../../src/app/services/header-service.service'\n// import { RootService } from 'src/app/component/root/root.service'\nimport { FlatTreeControl } from '@angular/cdk/tree'\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'ws-author-course-collection',\n  templateUrl: './course-collection.component.html',\n  styleUrls: ['./course-collection.component.scss'],\n  providers: [CollectionStoreService, CollectionResolverService],\n})\nexport class CourseCollectionComponent implements OnInit, OnDestroy {\n  contents: NSContent.IContentMeta[] = []\n  couseCreated = ''\n  currentParentId!: string\n  stepper: IAuthSteps[] = [\n    { title: 'Choose Type', disabled: true },\n    { title: 'Content', disabled: false },\n    { title: 'Details', disabled: false },\n  ]\n  isSubmitPressed = false\n  showLanguageBar = false\n  actionButton: IActionButtonConfig | null = null\n  currentStep = 1\n  currentContent!: string\n  activeContentSubscription: Subscription | null = null\n  routerSubscription: Subscription | null = null\n  isChanged = false\n  previewIdentifier: string | null = null\n  viewMode = 'meta'\n  mimeTypeRoute = ''\n\n  mediumScreen = false\n  sideBarOpened = false\n  mediumSizeBreakpoint$ = this.breakpointObserver\n    .observe([Breakpoints.XSmall, Breakpoints.Small])\n    .pipe(map((res: BreakpointState) => res.matches))\n  mode$ = this.mediumSizeBreakpoint$.pipe(map(isMedium => (isMedium ? 'over' : 'side')))\n  leftArrow = true\n  showAddchapter = false\n  createTopicForm: FormGroup | undefined\n  reloadTOC = false\n  public sideNavBarOpened = false\n  callSaveFn!: boolean\n  courseName: any\n  parentNodeId!: number\n  expandedNodes = new Set<number>()\n  treeControl!: FlatTreeControl<IContentTreeNode>\n  triggerQuizSave = false\n  triggerUploadSave = false\n\n  constructor(\n    private contentService: EditorContentService,\n    private activateRoute: ActivatedRoute,\n    private storeService: CollectionStoreService,\n    private resolverService: CollectionResolverService,\n    private initService: AuthInitService,\n    private loaderService: LoaderService,\n    private dialog: MatDialog,\n    private snackBar: MatSnackBar,\n    private editorService: EditorService,\n    private router: Router,\n    private notificationSvc: NotificationService,\n    private accessControlSvc: AccessControlService,\n    private breakpointObserver: BreakpointObserver,\n    private fb: FormBuilder,\n    // private headerService: HeaderServiceService,\n    // private rootSvc: RootService,\n  ) {\n    // this.callSaveFn = this.headerService.isSavePressed\n    // this.rootSvc.showNavbarDisplay$.next(false)\n    // this.headerService.headerSaveData.subscribe(data => {\n    //   if (data) {\n    //     this.save()\n    //   }\n    // })\n  }\n\n  ngOnInit() {\n    this.routerValuesCall()\n    this.parentNodeId = this.storeService.currentParentNode\n    // this.expandNodesById([this.parentNodeId])\n    this.createTopicForm = this.fb.group({\n      topicName: new FormControl('', [Validators.required]),\n      topicDescription: new FormControl('', [Validators.required]),\n    })\n\n    this.stepper = this.initService.collectionConfig.stepper\n    this.showLanguageBar = this.initService.collectionConfig.languageBar\n    const actionButton: IActionButton[] = []\n    this.initService.collectionConfig.actionButtons.buttons.forEach(action => {\n      if (\n        this.contentService.checkConditionV2(\n          this.contentService.getOriginalMeta(this.currentParentId),\n          action.conditions,\n        )\n      ) {\n        actionButton.push({\n          title: action.title,\n          icon: action.icon,\n          event: action.event,\n          conditions: action.conditions,\n        })\n      }\n    })\n    this.actionButton = {\n      enabled: this.initService.collectionConfig.actionButtons.enabled,\n      buttons: actionButton,\n    }\n    this.mediumSizeBreakpoint$.subscribe(isLtMedium => {\n      this.mediumScreen = isLtMedium\n      this.sideBarOpened = !isLtMedium\n    })\n  }\n\n  routerValuesCall() {\n    this.contentService.changeActiveCont.subscribe(data => {\n      this.currentContent = data\n\n      if (this.contentService.getUpdatedMeta(data).contentType !== 'Resource') {\n        this.viewMode = 'meta'\n      }\n\n    })\n\n    if (this.activateRoute.parent && this.activateRoute.parent.parent) {\n      this.routerSubscription = this.activateRoute.parent.parent.data.subscribe(data => {\n\n        this.courseName = data.contents[0].content.name\n\n        const contentDataMap = new Map<string, NSContent.IContentMeta>()\n\n        data.contents.map((v: { content: NSContent.IContentMeta; data: any }) => {\n          this.storeService.parentNode.push(v.content.identifier)\n          this.resolverService.buildTreeAndMap(\n            v.content,\n            contentDataMap,\n            this.storeService.flatNodeMap,\n            this.storeService.uniqueIdMap,\n            this.storeService.lexIdMap,\n          )\n        })\n        contentDataMap.forEach(content => this.contentService.setOriginalMeta(content))\n        const currentNode = (this.storeService.lexIdMap.get(this.currentContent) as number[])[0]\n\n        this.currentParentId = this.currentContent\n        this.storeService.treeStructureChange.next(\n          this.storeService.flatNodeMap.get(currentNode) as IContentNode,\n        )\n        this.storeService.currentParentNode = currentNode\n        this.storeService.currentSelectedNode = currentNode\n        let newCreatedNode = 0\n        const newCreatedLexid = this.editorService.newCreatedLexid\n        if (newCreatedLexid) {\n          newCreatedNode = (this.storeService.lexIdMap.get(newCreatedLexid) as number[])[0]\n          this.storeService.selectedNodeChange.next(newCreatedNode)\n        }\n\n        if (data.contents[0] && data.contents[0].content && data.contents[0].content.children[0] &&\n          data.contents[0].content.children[0].identifier) {\n          this.subAction({ type: 'editContent', identifier: data.contents[0].content.children[0].identifier, nodeClicked: true })\n          this.storeService.selectedNodeChange.next(data.contents[0].content.children[0].identifier)\n        }\n\n        // this.storeService.selectedNodeChange.subscribe(node => {\n        //   if (node) {\n        //     console.log('selected node', node)\n        //     const getNodeId = (this.storeService.lexIdMap.get(node.toString()) as number[])[0]\n        //     this.storeService.currentSelectedNode = getNodeId\n\n        //     // this.contentService.currentContent = node.toString()\n\n        //     // this.contentService.changeActiveCont.next(node.toString())\n\n        //   }\n        // })\n\n      })\n\n      this.activateRoute.parent.url.subscribe(data => {\n        const urlParam = data[0].path\n        // if (urlParam === 'collection') {\n        //   this.headerService.showCreatorHeader(this.courseName)\n        // }\n\n      })\n    }\n  }\n\n  expandNodesById(ids?: number[]) {\n    const idSet = ids ? new Set(ids) : this.expandedNodes\n    this.treeControl.dataNodes.forEach(node => {\n      if (idSet.has(node.id)) {\n        this.treeControl.expand(node)\n        let parent = this.getParentNode(node)\n        while (parent) {\n          this.treeControl.expand(parent)\n          parent = this.getParentNode(parent)\n        }\n      }\n    })\n  }\n\n  getParentNode(node: IContentTreeNode): IContentTreeNode | null {\n    const currentLevel = node.level\n\n    if (currentLevel < 1) {\n      return null\n    }\n\n    const startIndex = this.treeControl.dataNodes.indexOf(node) - 1\n\n    for (let i = startIndex; i >= 0; i = i - 1) {\n      const currentNode = this.treeControl.dataNodes[i]\n\n      if (currentNode.level < currentLevel) {\n        return currentNode\n      }\n    }\n    return null\n  }\n\n  ngOnDestroy() {\n    this.loaderService.changeLoad.next(false)\n    // this.headerService.showCreatorHeader('showlogo')\n    // this.rootSvc.showNavbarDisplay$.next(true)\n  }\n\n  addChapterName() {\n    // console.log('newchap', this.newChapterName)\n  }\n\n  async setContentType(param: string) {\n    if (this.createTopicForm && this.createTopicForm.value) {\n\n      this.couseCreated = param\n      const asSibling = false\n\n      const node = {\n        id: this.storeService.currentParentNode,\n        identifier: this.storeService.parentNode[0],\n        editable: true,\n        category: 'Course',\n        childLoaded: true,\n        expandable: true,\n        level: 1,\n      }\n\n      const parentNode = node\n      this.loaderService.changeLoad.next(true)\n\n      const isDone = await this.storeService.createChildOrSibling(\n        this.couseCreated,\n        parentNode,\n        asSibling ? node.id : undefined,\n        'below',\n        this.createTopicForm.value,\n        param === 'web' ? 'link' : '',\n\n      )\n\n      this.snackBar.openFromComponent(NotificationComponent, {\n        data: {\n          type: isDone ? Notify.SUCCESS : Notify.FAIL,\n        },\n        duration: NOTIFICATION_TIME * 1000,\n\n      })\n\n      if (isDone) {\n\n        const newCreatedLexid = this.editorService.newCreatedLexid\n        const newCreatedNode = (this.storeService.lexIdMap.get(newCreatedLexid) as number[])[0]\n        this.storeService.currentSelectedNode = newCreatedNode\n        this.storeService.selectedNodeChange.next(newCreatedNode)\n        this.currentContent = this.editorService.newCreatedLexid\n      }\n      this.showAddchapter = false\n      this.loaderService.changeLoad.next(false)\n\n      this.subAction({ type: 'editContent', identifier: this.editorService.newCreatedLexid, nodeClicked: false })\n      this.createTopicForm.reset()\n      this.save()\n    }\n  }\n\n  sidenavClose() {\n    setTimeout(() => (this.leftArrow = true), 500)\n  }\n\n  save(nextAction?: string) {\n\n    const updatedContent = this.contentService.upDatedContent || {}\n    if (this.viewMode === 'assessment') {\n      this.triggerQuizSave = true\n    } else\n    if (this.viewMode === 'upload') {\n    // TODO  console.log('viewmode', this.viewMode)\n      this.triggerUploadSave = true\n    }\n    if (\n      Object.keys(updatedContent).length ||\n      Object.keys(this.storeService.changedHierarchy).length\n    ) {\n      this.isChanged = true\n      this.loaderService.changeLoad.next(true)\n      this.triggerSave().subscribe(\n        () => {\n          if (nextAction) {\n            this.action(nextAction)\n          }\n          this.loaderService.changeLoad.next(false)\n          this.snackBar.openFromComponent(NotificationComponent, {\n            data: {\n              type: Notify.SAVE_SUCCESS,\n            },\n            duration: NOTIFICATION_TIME * 1000,\n          })\n          // window.location.reload()\n        },\n        (error: any) => {\n          if (error.status === 409) {\n            const errorMap = new Map<string, NSContent.IContentMeta>()\n            Object.keys(this.contentService.originalContent).forEach(v =>\n              errorMap.set(v, this.contentService.originalContent[v]),\n            )\n            const dialog = this.dialog.open(ErrorParserComponent, {\n              width: '80vw',\n              height: '90vh',\n              data: {\n                errorFromBackendData: error.error,\n                dataMapping: errorMap,\n              },\n            })\n            dialog.afterClosed().subscribe(v => {\n              if (v) {\n                if (typeof v === 'string') {\n                  this.storeService.selectedNodeChange.next(\n                    (this.storeService.lexIdMap.get(v) as number[])[0],\n                  )\n                  this.contentService.changeActiveCont.next(v)\n                } else {\n                  this.storeService.selectedNodeChange.next(v)\n                  this.contentService.changeActiveCont.next(\n                    this.storeService.uniqueIdMap.get(v) as string,\n                  )\n                }\n              }\n            })\n          }\n          this.loaderService.changeLoad.next(false)\n          this.snackBar.openFromComponent(NotificationComponent, {\n            data: {\n              type: Notify.SAVE_FAIL,\n            },\n            duration: NOTIFICATION_TIME * 1000,\n          })\n        },\n      )\n    } else {\n      if (nextAction) {\n        this.action(nextAction)\n      } else {\n        this.snackBar.openFromComponent(NotificationComponent, {\n          data: {\n            type: Notify.UP_TO_DATE,\n          },\n          duration: NOTIFICATION_TIME * 1000,\n        })\n      }\n    }\n  }\n\n  get validationCheck(): boolean {\n    const currentNodeId = this.storeService.lexIdMap.get(this.currentParentId) as number[]\n    const returnValue = this.storeService.validationCheck(currentNodeId[0])\n    if (returnValue) {\n      const dialog = this.dialog.open(ErrorParserComponent, {\n        width: '80vw',\n        height: '90vh',\n        data: {\n          processErrorData: returnValue,\n        },\n      })\n      dialog.afterClosed().subscribe(v => {\n        if (v) {\n          if (typeof v === 'string') {\n            this.storeService.selectedNodeChange.next(\n              (this.storeService.lexIdMap.get(v) as number[])[0],\n            )\n            this.contentService.changeActiveCont.next(v)\n          } else {\n            this.storeService.selectedNodeChange.next(v)\n            this.contentService.changeActiveCont.next(\n              this.storeService.uniqueIdMap.get(v) as string,\n            )\n          }\n        }\n      })\n      return false\n    }\n    return true\n  }\n\n  takeAction() {\n    this.isSubmitPressed = true\n    const needSave = Object.keys(this.contentService.upDatedContent || {}).length\n    if (!needSave && !this.isChanged) {\n      this.snackBar.openFromComponent(NotificationComponent, {\n        data: {\n          type: Notify.UP_TO_DATE,\n        },\n        duration: NOTIFICATION_TIME * 1000,\n      })\n      return\n    }\n    if (this.validationCheck) {\n      const dialogRef = this.dialog.open(CommentsDialogComponent, {\n        width: '750px',\n        height: '450px',\n        data: this.contentService.getOriginalMeta(this.currentParentId),\n      })\n\n      dialogRef.afterClosed().subscribe((commentsForm: FormGroup) => {\n        this.finalCall(commentsForm)\n      })\n    }\n  }\n\n  finalCall(commentsForm: FormGroup) {\n    if (commentsForm) {\n      const body: NSApiRequest.IForwardBackwardActionGeneral = {\n        comment: commentsForm.controls.comments.value,\n        operation:\n          commentsForm.controls.action.value === 'accept' ||\n            ['Draft', 'Live'].includes(\n              this.contentService.originalContent[this.currentParentId].status,\n            )\n            ? 1\n            : 0,\n      }\n      const updatedMeta = this.contentService.getUpdatedMeta(this.currentParentId)\n      const needSave =\n        Object.keys(this.contentService.upDatedContent || {}).length ||\n        Object.keys(this.storeService.changedHierarchy).length\n      const saveCall = (needSave ? this.triggerSave() : of({} as any)).pipe(\n        mergeMap(() =>\n          this.editorService\n            .forwardBackward(\n              body,\n              this.currentParentId,\n              this.contentService.originalContent[this.currentParentId].status,\n            )\n            .pipe(\n              mergeMap(() =>\n                this.notificationSvc\n                  .triggerPushPullNotification(\n                    updatedMeta,\n                    body.comment,\n                    body.operation ? true : false,\n                  )\n                  .pipe(\n                    catchError(() => {\n                      return of({} as any)\n                    }),\n                  ),\n              ),\n            ),\n        ),\n      )\n      this.loaderService.changeLoad.next(true)\n      saveCall.subscribe(\n        () => {\n          this.loaderService.changeLoad.next(false)\n          this.snackBar.openFromComponent(NotificationComponent, {\n            data: {\n              type: this.getMessage('success'),\n            },\n            duration: NOTIFICATION_TIME * 1000,\n          })\n          this.contents = this.contents.filter(v => v.identifier !== this.currentParentId)\n          if (this.contents.length) {\n            this.contentService.changeActiveCont.next(this.contents[0].identifier)\n          } else {\n            this.router.navigateByUrl('/author/home')\n          }\n        },\n        (error: any) => {\n          if (error.status === 409) {\n            const errorMap = new Map<string, NSContent.IContentMeta>()\n            Object.keys(this.contentService.originalContent).forEach(v =>\n              errorMap.set(v, this.contentService.originalContent[v]),\n            )\n            const dialog = this.dialog.open(ErrorParserComponent, {\n              width: '80vw',\n              height: '90vh',\n              data: {\n                errorFromBackendData: error.error,\n                dataMapping: errorMap,\n              },\n            })\n            dialog.afterClosed().subscribe(v => {\n              if (v) {\n                if (typeof v === 'string') {\n                  this.storeService.selectedNodeChange.next(\n                    (this.storeService.lexIdMap.get(v) as number[])[0],\n                  )\n                  this.contentService.changeActiveCont.next(v)\n                } else {\n                  this.storeService.selectedNodeChange.next(v)\n                  this.contentService.changeActiveCont.next(\n                    this.storeService.uniqueIdMap.get(v) as string,\n                  )\n                }\n              }\n            })\n          }\n          this.loaderService.changeLoad.next(false)\n          this.snackBar.openFromComponent(NotificationComponent, {\n            data: {\n              type: this.getMessage('failure'),\n            },\n            duration: NOTIFICATION_TIME * 1000,\n          })\n        },\n      )\n    }\n  }\n\n  preview(id: string) {\n    const updatedContent = this.contentService.upDatedContent || {}\n    const saveCall =\n      Object.keys(updatedContent).length || Object.keys(this.storeService.changedHierarchy).length\n        ? this.triggerSave()\n        : of({} as any)\n    this.loaderService.changeLoad.next(true)\n    saveCall.subscribe(\n      () => {\n        this.mimeTypeRoute = VIEWER_ROUTE_FROM_MIME(\n          this.contentService.getUpdatedMeta(id).mimeType as any,\n        )\n        this.loaderService.changeLoad.next(false)\n        this.previewIdentifier = id\n      },\n      error => {\n        if (error.status === 409) {\n          const errorMap = new Map<string, NSContent.IContentMeta>()\n          Object.keys(this.contentService.originalContent).forEach(v =>\n            errorMap.set(v, this.contentService.originalContent[v]),\n          )\n          const dialog = this.dialog.open(ErrorParserComponent, {\n            width: '750px',\n            height: '450px',\n            data: {\n              errorFromBackendData: error.error,\n              dataMapping: errorMap,\n            },\n          })\n          dialog.afterClosed().subscribe(v => {\n            if (v) {\n              if (typeof v === 'string') {\n                this.storeService.selectedNodeChange.next(\n                  (this.storeService.lexIdMap.get(v) as number[])[0],\n                )\n                this.contentService.changeActiveCont.next(v)\n              } else {\n                this.storeService.selectedNodeChange.next(v)\n                this.contentService.changeActiveCont.next(\n                  this.storeService.uniqueIdMap.get(v) as string,\n                )\n              }\n            }\n          })\n        }\n        this.loaderService.changeLoad.next(false)\n        this.snackBar.openFromComponent(NotificationComponent, {\n          data: {\n            type: Notify.SAVE_FAIL,\n          },\n          duration: NOTIFICATION_TIME * 1000,\n        })\n      },\n    )\n  }\n\n  closePreview() {\n    this.previewIdentifier = null\n  }\n\n  triggerSave() {\n    const nodesModified: any = {}\n    let isRootPresent = false\n    Object.keys(this.contentService.upDatedContent).forEach(v => {\n      if (!isRootPresent) {\n        isRootPresent = this.storeService.parentNode.includes(v)\n      }\n      nodesModified[v] = {\n        isNew: false,\n        root: this.storeService.parentNode.includes(v),\n        metadata: this.contentService.upDatedContent[v],\n      }\n    })\n    if (!isRootPresent) {\n      nodesModified[this.currentParentId] = {\n        isNew: false,\n        root: true,\n        metadata: {},\n      }\n    }\n    const requestBody: NSApiRequest.IContentUpdate = {\n      nodesModified,\n      hierarchy: this.storeService.changedHierarchy,\n    }\n\n    return this.editorService.updateContentV2(requestBody).pipe(\n      tap(() => {\n        this.storeService.changedHierarchy = {}\n        Object.keys(this.contentService.upDatedContent).forEach(id => {\n          this.contentService.resetOriginalMeta(this.contentService.upDatedContent[id], id)\n        })\n        this.contentService.upDatedContent = {}\n        // window.location.reload()\n      }),\n    )\n  }\n\n  getMessage(type: 'success' | 'failure') {\n    if (type === 'success') {\n      switch (this.contentService.originalContent[this.currentParentId].status) {\n        case 'Draft':\n        case 'Live':\n          return Notify.SEND_FOR_REVIEW_SUCCESS\n        case 'InReview':\n          return Notify.REVIEW_SUCCESS\n        case 'Reviewed':\n          return Notify.PUBLISH_SUCCESS\n        default:\n          return ''\n      }\n    }\n    switch (this.contentService.originalContent[this.currentParentId].status) {\n      case 'Draft':\n      case 'Live':\n        return Notify.SEND_FOR_REVIEW_FAIL\n      case 'InReview':\n        return Notify.REVIEW_FAIL\n      case 'Reviewed':\n        return Notify.PUBLISH_FAIL\n      default:\n        return ''\n    }\n  }\n\n  subAction(event: { type: string; identifier: string, nodeClicked?: boolean }) {\n    // const nodeClicked = event.nodeClicked\n    this.contentService.changeActiveCont.next(event.identifier)\n    switch (event.type) {\n      case 'editMeta':\n        this.viewMode = 'meta'\n        break\n      case 'editContent':\n        if (event.nodeClicked === false) {\n        //  this.save('refresh')\n        }\n\n        const content = this.contentService.getUpdatedMeta(event.identifier)\n        if (['application/pdf', 'application/x-mpegURL'].includes(content.mimeType)) {\n          this.viewMode = 'upload'\n        }  else if (['video/x-youtube', 'application/html'].includes(content.mimeType) && content.fileType === 'link') {\n          this.viewMode = 'curate'\n        } else if (content.mimeType === 'application/html') {\n          this.viewMode = 'upload'\n        } else if (content.mimeType === 'application/quiz') {\n          this.viewMode = 'assessment'\n        } else if (content.mimeType === 'application/web-module') {\n          this.viewMode = 'webmodule'\n        }\n        // this.save()\n        // localStorage.setItem('afterClick', nodeClicked)\n        // if (nodeClicked) {\n        //   window.location.reload()\n        // }\n        // this.routerValuesCall()\n\n        break\n      case 'preview':\n        this.preview(event.identifier)\n        break\n      case 'showAddChapter':\n        this.showAddchapter = false\n    }\n  }\n\n  action(type: string) {\n    switch (type) {\n      case 'next':\n        this.viewMode = 'meta'\n        break\n\n      case 'refresh':\n        window.location.reload()\n        break\n\n      case 'scroll':\n\n        const el = document.getElementById('edit-meta')\n        if (el) {\n          el.scrollIntoView()\n        }\n\n        break\n\n      case 'save':\n        this.save()\n        break\n\n      case 'saveAndNext':\n        this.save('next')\n        break\n\n      case 'preview':\n        this.preview(this.currentContent)\n        break\n\n      case 'push':\n        if (this.getAction() === 'publish') {\n          const dialogRefForPublish = this.dialog.open(ConfirmDialogComponent, {\n            width: '70%',\n            data: 'publishMessage',\n          })\n          dialogRefForPublish.afterClosed().subscribe(result => {\n            if (result) {\n              this.takeAction()\n            }\n          })\n        } else {\n          this.takeAction()\n        }\n        break\n\n      case 'delete':\n        const dialog = this.dialog.open(DeleteDialogComponent, {\n          width: '600px',\n          height: 'auto',\n          data: this.contentService.getUpdatedMeta(this.currentParentId),\n        })\n        dialog.afterClosed().subscribe(confirm => {\n          if (confirm) {\n            this.contents = this.contents.filter(v => v.identifier !== this.currentParentId)\n            if (this.contents.length) {\n              this.contentService.changeActiveCont.next(this.contents[0].identifier)\n            } else {\n              this.router.navigateByUrl('/author/home')\n            }\n          }\n        })\n        break\n\n      case 'fullscreen':\n        this.fullScreenToggle()\n        break\n\n      case 'close':\n        this.router.navigateByUrl('/author/home')\n        break\n    }\n  }\n\n  delete() {\n    this.loaderService.changeLoad.next(true)\n    this.editorService.deleteContent(this.currentParentId).subscribe(\n      () => {\n        this.loaderService.changeLoad.next(false)\n        this.snackBar.openFromComponent(NotificationComponent, {\n          data: {\n            type: Notify.SUCCESS,\n          },\n          duration: NOTIFICATION_TIME * 1000,\n        })\n        this.contents = this.contents.filter(v => v.identifier !== this.currentParentId)\n        if (this.contents.length) {\n          this.contentService.changeActiveCont.next(this.contents[0].identifier)\n        } else {\n          this.router.navigateByUrl('/author/home')\n        }\n      },\n      error => {\n        if (error.status === 409) {\n          const errorMap = new Map<string, NSContent.IContentMeta>()\n          Object.keys(this.contentService.originalContent).forEach(v =>\n            errorMap.set(v, this.contentService.originalContent[v]),\n          )\n          const dialog = this.dialog.open(ErrorParserComponent, {\n            width: '750px',\n            height: '450px',\n            data: {\n              errorFromBackendData: error.error,\n              dataMapping: errorMap,\n            },\n          })\n          dialog.afterClosed().subscribe(v => {\n            if (v) {\n              if (typeof v === 'string') {\n                this.storeService.selectedNodeChange.next(\n                  (this.storeService.lexIdMap.get(v) as number[])[0],\n                )\n                this.contentService.changeActiveCont.next(v)\n              } else {\n                this.storeService.selectedNodeChange.next(v)\n                this.contentService.changeActiveCont.next(\n                  this.storeService.uniqueIdMap.get(v) as string,\n                )\n              }\n            }\n          })\n        }\n        this.loaderService.changeLoad.next(false)\n        this.snackBar.openFromComponent(NotificationComponent, {\n          data: {\n            type: Notify.CONTENT_FAIL,\n          },\n          duration: NOTIFICATION_TIME * 1000,\n        })\n      },\n    )\n  }\n\n  fullScreenToggle = () => {\n    const doc: any = document\n    const elm: any = doc.getElementById('auth-toc')\n    if (elm.requestFullscreen) {\n      !doc.fullscreenElement ? elm.requestFullscreen() : doc.exitFullscreen()\n    } else if (elm.mozRequestFullScreen) {\n      !doc.mozFullScreen ? elm.mozRequestFullScreen() : doc.mozCancelFullScreen()\n    } else if (elm.msRequestFullscreen) {\n      !doc.msFullscreenElement ? elm.msRequestFullscreen() : doc.msExitFullscreen()\n    } else if (elm.webkitRequestFullscreen) {\n      !doc.webkitIsFullscreen ? elm.webkitRequestFullscreen() : doc.webkitCancelFullscreen()\n    }\n  }\n\n  getAction(): string {\n    switch (this.contentService.originalContent[this.currentParentId].status) {\n      case 'Draft':\n      case 'Live':\n        return 'sendForReview'\n      case 'InReview':\n        return 'review'\n      case 'Reviewed':\n       const isDraftPresent = this.contentService.resetStatus()\n       /**Change all content as draft, if one of the content is draft status */\n        if (isDraftPresent) {\n          this.contentService.changeStatusDraft()\n          return 'sendForReview'\n        }\n        return 'publish'\n      default:\n        return 'sendForReview'\n    }\n  }\n\n  canDelete() {\n    return (\n      this.accessControlSvc.hasRole(['editor', 'admin']) ||\n      (['Draft', 'Live'].includes(\n        this.contentService.originalContent[this.currentParentId].status,\n      ) &&\n        this.contentService.originalContent[this.currentParentId].creatorContacts.find(\n          v => v.id === this.accessControlSvc.userId,\n        ))\n    )\n  }\n}\n","export default \".app-logo {\\n  max-width: 100px;\\n  max-height: 60px;\\n  border-left: solid 1px;\\n  padding-left: 8px;\\n  margin-left: 10px;\\n}\\n@media only screen and (max-width: 599px) {\\n  .app-logo {\\n    max-width: 80px;\\n    max-height: 30px;\\n  }\\n}\\n.mr-10 {\\n  margin-right: 10px;\\n}\\n.xsmall {\\n  position: absolute;\\n  display: block;\\n  right: 0;\\n}\\n.header-spacer {\\n  flex: 1 1 auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3NvbmFzaGFqdS9WaWRlb3Mvc3BoZXJlLW1vYmlsZS9wcm9qZWN0L3dzL2F1dGhvci9zcmMvbGliL3JvdXRpbmcvbW9kdWxlcy9lZGl0b3Ivcm91dGluZy9tb2R1bGVzL2NvbGxlY3Rpb24vY29tcG9uZW50cy9jb3Vyc2UtaGVhZGVyL2NvdXJzZS1oZWFkZXIuY29tcG9uZW50LnNjc3MiLCJwcm9qZWN0L3dzL2F1dGhvci9zcmMvbGliL3JvdXRpbmcvbW9kdWxlcy9lZGl0b3Ivcm91dGluZy9tb2R1bGVzL2NvbGxlY3Rpb24vY29tcG9uZW50cy9jb3Vyc2UtaGVhZGVyL2NvdXJzZS1oZWFkZXIuY29tcG9uZW50LnNjc3MiLCIvaG9tZS9zb25hc2hhanUvVmlkZW9zL3NwaGVyZS1tb2JpbGUvc3R5bGVzL193cy1taXhpbnMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNFLGdCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxzQkFBQTtFQUNFLGlCQUFBO0VBQ0EsaUJBQUE7QUNESjtBQ2FFO0VGakJGO0lBUUksZUFBQTtJQUNBLGdCQUFBO0VDQUY7QUFDRjtBREdBO0VBQ0Usa0JBQUE7QUNBRjtBREdBO0VBQ0Usa0JBQUE7RUFDQSxjQUFBO0VBQ0EsUUFBQTtBQ0FGO0FER0E7RUFDRSxjQUFBO0FDQUYiLCJmaWxlIjoicHJvamVjdC93cy9hdXRob3Ivc3JjL2xpYi9yb3V0aW5nL21vZHVsZXMvZWRpdG9yL3JvdXRpbmcvbW9kdWxlcy9jb2xsZWN0aW9uL2NvbXBvbmVudHMvY291cnNlLWhlYWRlci9jb3Vyc2UtaGVhZGVyLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCAnc3R5bGVzL193cy1taXhpbnMuc2Nzcyc7XG5cbi5hcHAtbG9nbyB7XG4gIG1heC13aWR0aDogMTAwcHg7XG4gIG1heC1oZWlnaHQ6IDYwcHg7XG4gIGJvcmRlci1sZWZ0OiBzb2xpZCAxcHg7XG4gICAgcGFkZGluZy1sZWZ0OiA4cHg7XG4gICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG5cbiAgQGluY2x1ZGUgYnJlYWtwb2ludC14cyB7XG4gICAgbWF4LXdpZHRoOiA4MHB4O1xuICAgIG1heC1oZWlnaHQ6IDMwcHg7XG4gIH1cbn1cblxuLm1yLTEwIHtcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xufVxuXG4ueHNtYWxsIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBkaXNwbGF5OiBibG9jaztcbiAgcmlnaHQ6IDA7XG59XG5cbi5oZWFkZXItc3BhY2VyIHtcbiAgZmxleDogMSAxIGF1dG87XG59IiwiLmFwcC1sb2dvIHtcbiAgbWF4LXdpZHRoOiAxMDBweDtcbiAgbWF4LWhlaWdodDogNjBweDtcbiAgYm9yZGVyLWxlZnQ6IHNvbGlkIDFweDtcbiAgcGFkZGluZy1sZWZ0OiA4cHg7XG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xufVxuQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA1OTlweCkge1xuICAuYXBwLWxvZ28ge1xuICAgIG1heC13aWR0aDogODBweDtcbiAgICBtYXgtaGVpZ2h0OiAzMHB4O1xuICB9XG59XG5cbi5tci0xMCB7XG4gIG1hcmdpbi1yaWdodDogMTBweDtcbn1cblxuLnhzbWFsbCB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgZGlzcGxheTogYmxvY2s7XG4gIHJpZ2h0OiAwO1xufVxuXG4uaGVhZGVyLXNwYWNlciB7XG4gIGZsZXg6IDEgMSBhdXRvO1xufSIsIkBpbXBvcnQgJ3N0eWxlcy9fd3MtdmFycy5zY3NzJztcblxuQG1peGluIHJldGluYSB7XG4gIEBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKC13ZWJraXQtbWluLWRldmljZS1waXhlbC1yYXRpbzogMiksXG4gICAgb25seSBzY3JlZW4gYW5kIChtaW4tLW1vei1kZXZpY2UtcGl4ZWwtcmF0aW86IDIpLFxuICAgIG9ubHkgc2NyZWVuIGFuZCAoLW8tbWluLWRldmljZS1waXhlbC1yYXRpbzogMi8xKSxcbiAgICBvbmx5IHNjcmVlbiBhbmQgKG1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86IDIpLFxuICAgIG9ubHkgc2NyZWVuIGFuZCAobWluLXJlc29sdXRpb246IDE5MmRwaSksXG4gICAgb25seSBzY3JlZW4gYW5kIChtaW4tcmVzb2x1dGlvbjogMmRwcHgpIHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuQG1peGluIHByaW50IHtcbiAgQG1lZGlhIG9ubHkgcHJpbnQge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbkBtaXhpbiBicmVha3BvaW50LXhzIHtcbiAgQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA1OTlweCkge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5AbWl4aW4gYnJlYWtwb2ludC1zIHtcbiAgQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA2MDBweCkgYW5kIChtYXgtd2lkdGg6IDk1OXB4KSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cbkBtaXhpbiBicmVha3BvaW50LW0ge1xuICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDk2MHB4KSBhbmQgKG1heC13aWR0aDogMTI3OXB4KSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cbkBtaXhpbiBicmVha3BvaW50LWwge1xuICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDEyODBweCkgYW5kIChtYXgtd2lkdGg6IDE5MTlweCkge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5AbWl4aW4gYnJlYWtwb2ludC14bCB7XG4gIEBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTkyMHB4KSBhbmQgKG1heC13aWR0aDogNTAwMHB4KSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cbkBtaXhpbiBicmVha3BvaW50LWx0LXMge1xuICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDU5OXB4KSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cbkBtaXhpbiBicmVha3BvaW50LWx0LW0ge1xuICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDk1OXB4KSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cbkBtaXhpbiBicmVha3BvaW50LWx0LWwge1xuICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDEyNzlweCkge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5AbWl4aW4gYnJlYWtwb2ludC1sdC14bCB7XG4gIEBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTkxOXB4KSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cbkBtaXhpbiBicmVha3BvaW50LWd0LXhzIHtcbiAgQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA2MDBweCkge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5AbWl4aW4gYnJlYWtwb2ludC1ndC1zIHtcbiAgQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiA5NjBweCkge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5AbWl4aW4gYnJlYWtwb2ludC1ndC1tIHtcbiAgQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWluLXdpZHRoOiAxMjgwcHgpIHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuQG1peGluIGJyZWFrcG9pbnQtZ3QtbCB7XG4gIEBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1pbi13aWR0aDogMTkyMHB4KSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cbiJdfQ== */\"","\nimport { Component, OnInit, Input, Output, EventEmitter } from '@angular/core'\nimport { ConfigurationsService } from '@ws-widget/utils/src/public-api'\nimport { SafeUrl, DomSanitizer } from '@angular/platform-browser'\n// import { HeaderServiceService } from './../../../../../../../../../../../../../src/app/services/header-service.service'\nimport { IActionButtonConfig, IActionButton } from '@ws/author/src/lib/interface/action-button'\nimport { CollectionStoreService } from '../../services/store.service'\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'ws-author-course-header',\n  templateUrl: './course-header.component.html',\n  styleUrls: ['./course-header.component.scss'],\n})\nexport class CourseHeaderComponent implements OnInit {\n  appIcon: SafeUrl | null = null\n  courseNameHeader: any\n  @Input() buttonConfig: IActionButtonConfig | null = null\n  @Output() action = new EventEmitter<string>()\n  @Output() subAction = new EventEmitter<{ type: string; identifier: string; nodeClicked?: boolean }>()\n\n  requiredConfig: IActionButton[] = []\n\n  constructor(private configSvc: ConfigurationsService, private domSanitizer: DomSanitizer,\n              // private headerService: HeaderServiceService,\n              private store: CollectionStoreService) {\n                // this.headerService.showCourseHeader.subscribe(data => {\n                //   this.courseNameHeader = data\n                // })\n   }\n\n  ngOnInit() {\n    if (this.configSvc.instanceConfig) {\n       this.domSanitizer.bypassSecurityTrustResourceUrl(\n        this.appIcon = this.configSvc.instanceConfig.logos.app,\n      )\n    }\n\n    if (this.buttonConfig) {\n      this.buttonConfig.buttons.forEach(button => {\n        if (button.event === 'save' || button.event === 'push' || button.title === 'saveAndNext') {\n          this.requiredConfig.push(button)\n        }\n      })\n    }\n  }\n  showCourseSettings() {\n   this.subAction.emit({ type: 'editContent', identifier: this.store.parentNode[0], nodeClicked: true })\n  }\n}\n","import { Injectable } from '@angular/core'\nimport { ICON_TYPE } from '@ws/author/src/lib/constants/icons'\nimport { MIME_TYPE } from '@ws/author/src/lib/constants/mimeType'\nimport { AccessControlService } from '@ws/author/src/lib/modules/shared/services/access-control.service'\nimport { EditorContentService } from '@ws/author/src/lib/routing/modules/editor/services/editor-content.service'\nimport { NSContent } from '../../../../../../../interface/content'\nimport { IContentNode, IContentTreeNode } from '../interface/icontent-tree'\nimport { AuthInitService } from './../../../../../../../services/init.service'\n\n@Injectable()\n/**\n * The service which contains the logic to parse the collection hierarch data and produce the\n * respective tree structure or json structure\n */\nexport class CollectionResolverService {\n  // The set to hold the content type for which the lazy loading of children is required\n  lazyLoad = new Set<string>()\n  private _uniqueId = 0\n  constructor(\n    private accessService: AccessControlService,\n    private contentService: EditorContentService,\n    private authInitService: AuthInitService,\n  ) { }\n\n  get uniqueId() {\n    this._uniqueId += 1\n    return Date.now() + this._uniqueId\n  }\n  /**\n   * Restructure the hierarch passed from backend to a map and tree hierarch\n   * which is easy to read and update the meta and tree structure\n   *\n   * @param { NSContent.IContentMeta } content - The hierarchy to be passed\n   * @param { Map } content - The map which is used to read and populate meta data\n   * @param { Map<string, NSContent.IContentMeta> } flatNodeMap - The map which is used to modify change in individual tree structure\n   * @param { Map<number,string> } uniqueIdMap - The map which is used to get unique id against lex id\n   *\n   */\n  buildTreeAndMap(\n    content: NSContent.IContentMeta,\n    map: Map<string, NSContent.IContentMeta>,\n    flatNodeMap: Map<number, IContentNode>,\n    uniqueIdMap: Map<number, string>,\n    lexIdMap: Map<string, number[]>,\n  ): IContentNode {\n    /**\n     * Recursive function which actually do the work\n     *\n     * @param { NSContent.IContentMeta } currContent - The hierarchy to be passed\n     * @param { string[] } parentList - The parent lex ids in the hierarchy in the order of top to bottom\n     * @param { boolean } editable - Whether the user have access to change the parent hierarch or not\n     * @returns { IContentNode } the restructured hierarch data to load in tree\n     */\n    const recursiveFn = (\n      currContent: NSContent.IContentMeta,\n      parentId: number | undefined = undefined,\n      editable = true,\n    ): IContentNode => {\n      const treeStructure: IContentNode = {\n        editable,\n        parentId,\n        id: this.uniqueId,\n        identifier: currContent.identifier,\n        category: this.getCategory(currContent),\n        childLoaded: !this.lazyLoad.has(this.getCategory(currContent)),\n        children: [],\n      }\n      map.set(currContent.identifier, currContent)\n      uniqueIdMap.set(treeStructure.id, currContent.identifier)\n      const uniqueIds = lexIdMap.get(treeStructure.identifier)\n      if (uniqueIds) {\n        uniqueIds.push(treeStructure.id)\n      } else {\n        lexIdMap.set(treeStructure.identifier, [treeStructure.id])\n      }\n      /**\n       * Checking the user have access or not\n       */\n      const haveAccessToChangeStructure = this.hasAccess(currContent)\n      if (treeStructure.childLoaded && treeStructure.children) {\n        const children: IContentNode[] = []\n        currContent.children.forEach(v =>\n          children.push(recursiveFn(v, treeStructure.id, haveAccessToChangeStructure)),\n        )\n        treeStructure.children = children\n      }\n      flatNodeMap.set(treeStructure.id, treeStructure)\n      return treeStructure\n    }\n\n    return recursiveFn(content)\n  }\n\n  getFlatHierarchy(\n    id: number,\n    flatNodeMap: Map<number, IContentNode>,\n    rightPermission = true,\n  ): number[] {\n    const returnValue: number[] = []\n    const recursiveFunction = (currId: number) => {\n      returnValue.push(currId)\n      const node = flatNodeMap.get(currId) as IContentNode\n      if ((rightPermission && node.editable) || !rightPermission) {\n        const children = node.children || []\n        children.map(v => recursiveFunction(v.id))\n      }\n    }\n    recursiveFunction(id)\n    return returnValue\n  }\n\n  /**\n   * Since the category is not populated for old content to make it backward compatible\n   * we are checking the category first if it is not present we are sending the contentType\n   *\n   * @param { NSContent.IContentMeta } content - The content for which we need to get category\n   * @returns { string } The category\n   */\n  private getCategory(content: NSContent.IContentMeta): string {\n    return content.category || content.contentType\n  }\n\n  /**\n   * Since the categoryType is not populated for old content to make it backward compatible\n   * we are checking the categoryType first if it is not present we are checking the contentType\n   * and based on contentType we select resourceType or courseType\n   *\n   * @param { NSContent.IContentMeta } content - The content for which we need to get category\n   * @returns { string } The category type\n   */\n  getCategoryType(content: NSContent.IContentMeta): string {\n    switch (this.getCategory(content)) {\n      case 'Collection':\n        return ''\n      default:\n        return ''\n    }\n  }\n\n  /**\n   * To get the respective Mat icon mapping for the each contents\n   * For different resources we need different types of icons\n   *\n   * @param { NSContent.IContentMeta } content - The content for which we need to get category\n   * @returns { string } The mat icon to be displayed\n   */\n  getIcon(content: NSContent.IContentMeta): string {\n    if (content.mimeType === MIME_TYPE.collection) {\n      if (content.contentType === 'Learning Path') {\n        return ICON_TYPE.program\n      }\n      if (content.contentType === 'Course') {\n        return ICON_TYPE.course\n      }\n      return ICON_TYPE.learningModule\n    }\n    if (content.mimeType === MIME_TYPE.html) {\n      if (content.resourceType === 'Certification') {\n        return ICON_TYPE.certificate\n      }\n      if (content.isExternal) {\n        return ICON_TYPE.externalContent\n      }\n      return ICON_TYPE.internalContent\n    }\n    if (content.mimeType === MIME_TYPE.pdf) {\n      if (!content.artifactUrl) {\n        return ICON_TYPE.emptyFile\n      }\n      return ICON_TYPE.pdf\n    }\n    if (content.mimeType === MIME_TYPE.youtube) {\n      return ICON_TYPE.youtube\n    }\n    if (content.mimeType === MIME_TYPE.quiz) {\n      if (content.resourceType === 'Assessment') {\n        return ICON_TYPE.assessment\n      }\n      return ICON_TYPE.quiz\n    }\n    if (content.mimeType === MIME_TYPE.dragDrop) {\n      return ICON_TYPE.dragNDrop\n    }\n    if (content.mimeType === MIME_TYPE.htmlPicker) {\n      return ICON_TYPE.htmlPicker\n    }\n    if (content.mimeType === MIME_TYPE.webModule) {\n      return ICON_TYPE.internalContent\n    }\n    if (content.mimeType === MIME_TYPE.handson) {\n      return ICON_TYPE.handsOn\n    }\n    if (content.mimeType === MIME_TYPE.iap) {\n      return ICON_TYPE.iap\n    }\n    if (content.mimeType === MIME_TYPE.mp3) {\n      return ICON_TYPE.audio\n    }\n    if (content.mimeType === MIME_TYPE.mp4) {\n      return ICON_TYPE.video\n    }\n    if (content.contentType === 'Collection') {\n      return ICON_TYPE.learningModule\n    }\n    return ICON_TYPE.default\n  }\n\n  /**\n   * To get to know the user access to change the hierarchy structure or not\n   * Respective role have different access on different status of the content.\n   * @param { NSContent.IContentMeta } content - The content for which we need to get category\n   * @returns { boolean } The mat icon to be displayed\n   */\n  hasAccess(content: NSContent.IContentMeta, parentMeta?: NSContent.IContentMeta): boolean {\n    return this.contentService.hasAccess(content, false, parentMeta) &&\n      content.status === 'InReview'\n      ? this.authInitService.collectionConfig.enabledRole.includes('reviewer')\n      : content.status === 'Reviewed'\n        ? this.authInitService.collectionConfig.enabledRole.includes('publisher')\n        : ['Draft', 'Live'].includes(content.status)\n          ? this.authInitService.collectionConfig.enabledRole.includes('author')\n          : this.accessService.hasRole(['admin'])\n  }\n\n  /**\n   * To know whether the drop of one node is allowed based max depth logic\n   * @param { IContentTreeNode } dropNode - The node for which depth needs to be checked\n   * @param { IContentTreeNode } dragNode - The node for which depth needs to be checked\n   * @param { number } maxDepth - Maximum depth allowed in the configuration\n   * @returns { boolean } The mat icon to be displayed\n   */\n  allowMaxDepth(\n    _dropNode: IContentTreeNode,\n    _dragNode: IContentTreeNode,\n    _maxDepth: number,\n  ): boolean {\n    return true\n  }\n}\n","import { Injectable } from '@angular/core'\nimport { LoggerService } from '@ws-widget/utils'\nimport { DEPTH_RUE } from '@ws/author/src/lib/constants/depth-rule'\nimport { IAllowedType } from '@ws/author/src/lib/interface/collection-child-config'\nimport { NSContent } from '@ws/author/src/lib/interface/content'\nimport { ICreateEntity } from '@ws/author/src/lib/interface/create-entity'\nimport { EditorContentService } from '@ws/author/src/lib/routing/modules/editor/services/editor-content.service'\nimport { EditorService } from '@ws/author/src/lib/routing/modules/editor/services/editor.service'\nimport { AuthInitService } from '@ws/author/src/lib/services/init.service'\nimport { BehaviorSubject, ReplaySubject } from 'rxjs'\nimport { IContentNode, IContentTreeNode } from './../interface/icontent-tree'\nimport { CollectionResolverService } from './resolver.service'\n\ninterface IProcessedError {\n  id: string | number\n  name: string\n  message: string[]\n}\n@Injectable()\nexport class CollectionStoreService {\n  parentNode: string[] = []\n  invalidIds: number[] = []\n\n  onInvalidNodeChange = new ReplaySubject<number[]>()\n  /**\n   * Map from flat node to nested node. This helps us finding the nested node to be modified\n   */\n  flatNodeMap = new Map<number, IContentNode>()\n\n  /**\n   * Map for unique id and lex id. This helps us finding the lex id of the node\n   */\n  uniqueIdMap = new Map<number, string>()\n\n  /**\n   * Map for Lex id with unique id. This helps us tracking the change\n   */\n  lexIdMap = new Map<string, number[]>()\n\n  changedHierarchy: any = {}\n\n  currentParentNode!: number\n  currentSelectedNode!: number\n\n  constructor(\n    private contentService: EditorContentService,\n    private editorService: EditorService,\n    private resolver: CollectionResolverService,\n    private authInitService: AuthInitService,\n    private logger: LoggerService,\n  ) {}\n\n  treeStructureChange = new BehaviorSubject<IContentNode | null>(null)\n  selectedNodeChange = new BehaviorSubject<number | null>(null)\n  get selectedNode() {\n    return this.selectedNodeChange.value\n  }\n\n  allowDrop(dragNode: IContentTreeNode, dropNode: IContentTreeNode): boolean {\n    let allow = true\n    if (!dragNode.editable || !dropNode.editable) {\n      allow = false\n    } else if (!this.authInitService.collectionConfig.childrenConfig[dropNode.category]) {\n      allow = false\n    } else if (\n      !this.resolver.hasAccess(\n        this.contentService.getUpdatedMeta(dropNode.identifier),\n        dropNode.parentId\n          ? this.contentService.getUpdatedMeta(\n              (this.flatNodeMap.get(dropNode.parentId) as IContentNode).identifier,\n            )\n          : undefined,\n      )\n    ) {\n      allow = false\n    } else if (\n      this.authInitService.collectionConfig.maxDepth <=\n      dropNode.level + DEPTH_RUE[dragNode.category]\n    ) {\n      allow = false\n    }\n    return allow\n  }\n\n  dragAndDrop(\n    dragNode: IContentTreeNode | IContentNode,\n    dropNode: IContentTreeNode,\n    adjacentId?: number,\n    dropLocation: 'above' | 'below' = 'below',\n    emitChange = true,\n  ) {\n    const oldParentNode = dragNode.parentId ? this.flatNodeMap.get(dragNode.parentId) : undefined\n    const newParentNode = this.flatNodeMap.get(dropNode.id) as IContentNode\n    const oldParentChildList = oldParentNode ? (oldParentNode.children as IContentNode[]) : []\n    const newParentChildList = newParentNode.children as IContentNode[]\n    oldParentChildList.splice(\n      oldParentChildList.findIndex(v => v.id === dragNode.id),\n      1,\n    )\n    const childNode = this.flatNodeMap.get(dragNode.id) as IContentNode\n    childNode.parentId = dropNode.id\n    if (adjacentId) {\n      const dropPosition =\n        (dropNode.children || []).indexOf(adjacentId) + (dropLocation === 'above' ? -1 : 1)\n      const children = newParentNode.children as IContentNode[]\n      children.splice(dropPosition, 0, childNode)\n    } else {\n      if (newParentChildList) {\n        newParentChildList.push(childNode)\n      } else {\n        newParentNode.children = [childNode]\n      }\n    }\n    if (oldParentNode) {\n      this.changedHierarchy[oldParentNode.identifier] = {\n        root: this.parentNode.includes(oldParentNode.identifier),\n        children: oldParentChildList.map(v => {\n          const child = {\n            identifier: v.identifier,\n            reasonAdded: 'Added from Authoring Tool',\n            childrenClassifiers: [],\n          }\n          return child\n        }),\n      }\n    }\n    this.changedHierarchy[newParentNode.identifier] = {\n      root: this.parentNode.includes(newParentNode.identifier),\n      children: newParentChildList.map(v => {\n        const child = {\n          identifier: v.identifier,\n          reasonAdded: 'Added from Authoring Tool',\n          childrenClassifiers: [],\n        }\n        return child\n      }),\n    }\n    if (emitChange) {\n      this.treeStructureChange.next(this.treeStructureChange.value)\n    }\n  }\n\n  async addChildOrSibling(\n    ids: string[],\n    dropNode: IContentTreeNode,\n    adjacentId?: number,\n    dropLocation: 'above' | 'below' = 'below',\n  ): Promise<boolean> {\n    try {\n      const contents = await this.editorService.readMultipleContent(ids).toPromise()\n      const contentDataMap = new Map<string, NSContent.IContentMeta>()\n      contents.map((v, index) => {\n        this.contentService.setOriginalMeta(v)\n        const treeStructure = this.resolver.buildTreeAndMap(\n          v,\n          contentDataMap,\n          this.flatNodeMap,\n          this.uniqueIdMap,\n          this.lexIdMap,\n        )\n        this.dragAndDrop(\n          treeStructure,\n          dropNode,\n          adjacentId,\n          dropLocation,\n          index === ids.length - 1,\n        )\n      })\n      return true\n    } catch (ex) {\n      this.logger.error(ex)\n      return false\n    }\n  }\n\n  async createChildOrSibling(\n    type: string,\n    dropNode: IContentTreeNode,\n    adjacentId?: number,\n    dropLocation: 'above' | 'below' = 'below',\n    topicObj?: any,\n    fileType?: string\n  ): Promise<boolean> {\n    try {\n      const meta = this.authInitService.creationEntity.get(type) as ICreateEntity\n      const parentData = this.contentService.parentUpdatedMeta()\n      const requestBody = {\n        name: topicObj ? topicObj.topicName : 'New Content',\n        description: topicObj ? topicObj.topicDescription : '',\n        mimeType: meta.mimeType,\n        contentType: meta.contentType,\n        resourceType: parentData.categoryType || '',\n        categoryType : parentData.categoryType || '',\n        fileType : fileType || '',\n\n        // thumbnail: parentData.thumbnail,\n        // appIcon: parentData.appIcon,\n        posterImage: parentData.posterImage,\n        sourceName: parentData.sourceName,\n        subTitle: parentData.subTitle,\n        body: parentData.body,\n     //   sourceName : parentData.sourceName,\n\n        locale:\n          // tslint:disable-next-line: ter-computed-property-spacing\n          this.contentService.originalContent[\n            (this.flatNodeMap.get(this.currentParentNode) as IContentNode).identifier\n            // tslint:disable-next-line: ter-computed-property-spacing\n          ].locale || 'en',\n        ...(meta.additionalMeta || {}),\n      }\n      // requestBody.posterImage = parentData.posterImage\n      // requestBody.sourceName = parentData.sourceName\n      // requestBody.subTitle = parentData.subTitle\n      // requestBody.body = parentData.body\n      // requestBody.categoryType = parentData.categoryType\n\n      const content = await this.editorService.createAndReadContent(requestBody).toPromise()\n      // if (content) {\n      //  // content.thumbnail = parentData.thumbnail\n      //  // content.appIcon = parentData.appIcon\n\n      // }\n      this.contentService.setOriginalMeta(content)\n      const contentDataMap = new Map<string, NSContent.IContentMeta>()\n      const treeStructure = this.resolver.buildTreeAndMap(\n        content,\n        contentDataMap,\n        this.flatNodeMap,\n        this.uniqueIdMap,\n        this.lexIdMap,\n      )\n      this.dragAndDrop(treeStructure, dropNode, adjacentId, dropLocation)\n      return true\n    } catch (ex) {\n      this.logger.error(ex)\n      return false\n    }\n  }\n\n  deleteNode(id: number) {\n    const deleteIds = this.resolver.getFlatHierarchy(id, this.flatNodeMap, false)\n    const node = this.flatNodeMap.get(id) as IContentNode\n    const parentNode = node.parentId ? this.flatNodeMap.get(node.parentId) : undefined\n\n    deleteIds.forEach(v => {\n      this.flatNodeMap.delete(v)\n      const lexId = this.uniqueIdMap.get(v) as string\n      this.uniqueIdMap.delete(v)\n      const uniqueIds = this.lexIdMap.get(lexId) as number[]\n      if (uniqueIds.length > 1) {\n        uniqueIds.splice(\n          uniqueIds.findIndex(currId => v === currId),\n          1,\n        )\n      } else {\n        this.lexIdMap.delete(lexId)\n        delete this.contentService.originalContent[lexId]\n        delete this.contentService.upDatedContent[lexId]\n        delete this.changedHierarchy[lexId]\n      }\n    })\n\n    if (parentNode) {\n      const children = parentNode.children || []\n      children.splice(\n        children.findIndex(v => v.id === id),\n        1,\n      )\n\n      this.changedHierarchy[parentNode.identifier] = {\n        root: this.parentNode.includes(parentNode.identifier),\n        children: children.map(v => {\n          const child = {\n            identifier: v.identifier,\n            reasonAdded: 'Added from Authoring Tool',\n            childrenClassifiers: [],\n          }\n          return child\n        }),\n      }\n    }\n    this.treeStructureChange.next(this.treeStructureChange.value)\n  }\n\n  cascadeDown(id: number, value: any, field: string, single = false): boolean {\n    const dependantIds = this.resolver.getFlatHierarchy(id, this.flatNodeMap, true)\n    if (dependantIds.length <= 1) {\n      return false\n    }\n    dependantIds\n      .filter(v => v !== id)\n      .forEach(v => {\n        const lexId = this.uniqueIdMap.get(v) as string\n        if (single) {\n          // tslint:disable-next-line: ter-computed-property-spacing\n          let meta = this.contentService.getUpdatedMeta(lexId)[\n            field as keyof NSContent.IContentMeta\n            // tslint:disable-next-line: ter-computed-property-spacing\n          ]\n          if (meta) {\n            meta.push(value)\n          } else {\n            meta = [value]\n          }\n          this.contentService.setUpdatedMeta(\n            ({ field: meta } as unknown) as NSContent.IContentMeta,\n            lexId,\n          )\n        } else {\n          this.contentService.setUpdatedMeta(\n            ({ field: value } as unknown) as NSContent.IContentMeta,\n            lexId,\n          )\n        }\n      })\n    return true\n  }\n\n  validationCheck(id: number): IProcessedError[] | null {\n    const returnValue: Map<number, IProcessedError> = new Map<number, IProcessedError>()\n    const errorIds = new Set<number>()\n    const hierarchy = this.resolver.getFlatHierarchy(id, this.flatNodeMap)\n    this.metaValidationCheck(hierarchy, errorIds, returnValue)\n    this.hierarchyStructureCheck(hierarchy, errorIds, returnValue)\n    this.onInvalidNodeChange.next(Array.from(errorIds))\n    return returnValue.size ? Array.from(returnValue.values()) : null\n  }\n\n  hierarchyStructureCheck(\n    ids: number[],\n    errorId: Set<number>,\n    errorMap: Map<number, IProcessedError>,\n  ) {\n    ids.forEach(v => {\n      const contentNode = this.flatNodeMap.get(v) as IContentNode\n      const category = contentNode.category as any\n      const childConfig = this.authInitService.collectionConfig.childrenConfig[category]\n      const errorMsg: string[] = []\n      const lexId = this.uniqueIdMap.get(v) as string\n      const content = this.contentService.getUpdatedMeta(lexId)\n\n      let currNode = contentNode\n      let currentLevel = 0\n      while (currNode.parentId) {\n        currentLevel = currentLevel + 1\n        currNode = this.flatNodeMap.get(currNode.parentId) as IContentNode\n      }\n      const excessLevel =\n        DEPTH_RUE[contentNode.category] +\n        currentLevel -\n        this.authInitService.collectionConfig.maxDepth\n      if (excessLevel > 0) {\n        errorMsg.push(\n          `Breached maximum level of depth allowed. It should be ${excessLevel} level above`,\n        )\n      }\n\n      if (childConfig) {\n        const allowedTypes = childConfig.childTypes\n        const childTypeMap: number[] = allowedTypes.map(() => 0)\n        const children = contentNode.children || []\n        if (childConfig.minChildren && children.length < childConfig.minChildren) {\n          errorMsg.push(\n            `Minimum ${childConfig.minChildren} children is required. But ${\n              children.length ? children.length : 'nothing'\n            } present`,\n          )\n        }\n        if (childConfig.maxChildren && children.length > childConfig.maxChildren) {\n          errorMsg.push(\n            `Maximum ${childConfig.minChildren} children is allowed. But ${children.length} present`,\n          )\n        }\n        children.forEach((child: IContentNode, position: number) => {\n          const childContent = this.contentService.getUpdatedMeta(child.identifier)\n          let canPresent = false\n          allowedTypes.forEach((element: IAllowedType, index: number) => {\n            const canAllow = this.contentService.checkConditionV2(childContent, element.conditions)\n            if (canAllow) {\n              canPresent = true\n              childTypeMap[index] = childTypeMap[index] + 1\n              if (position) {\n                return\n              }\n              // if (element.position === 'n' && position !== children.length - 1) {\n              //   let isSameChild = true\n              //   children.slice(position).forEach(sibling => {\n              //     const siblingChild = this.contentService.getUpdatedMeta(sibling.identifier)\n              //     isSameChild = this.contentService.checkConditionV2(\n              //       siblingChild,\n              //       element.conditions,\n              //     )\n              //     // if (!isSameChild) {\n              //     //   errorMsg.push(`${childContent.name || 'Untitled Content'} should be last child`)\n              //     //   return\n              //     // }\n              //   })\n              // }\n              return\n            }\n          })\n          if (!canPresent) {\n            errorMsg.push(`${childContent.name || 'Untitled Content'} is not allowed to add here`)\n          }\n        })\n        allowedTypes.forEach((type: IAllowedType, index: number) => {\n          if (type.minimum && childTypeMap[index] < type.minimum) {\n            errorMsg.push(\n              `Minimum ${type.minimum} contents of type ${this.formStringFromCondition(\n                type.conditions,\n              )} is required. But only ${childTypeMap[index]} is present`,\n            )\n          }\n          if (type.maximum && type.maximum < childTypeMap[index]) {\n            errorMsg.push(\n              `Maximum ${type.maximum} contents of type ${this.formStringFromCondition(\n                type.conditions,\n              )} is allowed. But ${childTypeMap[index]} is present`,\n            )\n          }\n        })\n      } else if (contentNode.children && contentNode.children.length) {\n        errorMsg.push(`Should not contain any child. But ${contentNode.children.length} were added`)\n      }\n      this.populateErrorMsg(v, errorMsg, content, errorId, errorMap)\n    })\n  }\n\n  formStringFromCondition(condition: any): string {\n    let returnValue = ''\n    if (condition.fit) {\n      condition.fit.forEach((subCondition: any, majorIndex: number) => {\n        Object.keys(subCondition).forEach((v: any, index: number) => {\n          returnValue = `${returnValue}${majorIndex > 0 ? ' or ' : ''}${\n            index > 0 ? ' ' : ''\n          }${v} in ${subCondition[v].join(' or ')}`\n        })\n      })\n    }\n    return returnValue\n  }\n\n  metaValidationCheck(ids: number[], errorId: Set<number>, errorMap: Map<number, IProcessedError>) {\n    ids.forEach(v => {\n      const errorMsg: string[] = []\n      const lexId = this.uniqueIdMap.get(v) as string\n      const content = this.contentService.getUpdatedMeta(lexId)\n      if (!this.contentService.isValid(lexId)) {\n        errorMsg.push('Mandatory fields are missing')\n      }\n\n      if (content.category === 'Resource') {\n        if (content.mimeType === 'application/html' && !content.artifactUrl && !content.body) {\n          errorMsg.push('Provide URL or populate \"Body\" field')\n        } else if (\n          ['application/pdf', 'application/x-mpegURL'].includes(content.mimeType) &&\n          !content.artifactUrl\n        ) {\n          errorMsg.push('Upload file')\n        }\n      }\n      this.populateErrorMsg(v, errorMsg, content, errorId, errorMap)\n    })\n  }\n\n  populateErrorMsg(\n    id: number,\n    errorMsg: string[],\n    content: NSContent.IContentMeta,\n    errorId: Set<number>,\n    errorMap: Map<number, IProcessedError>,\n  ) {\n    if (errorMsg.length) {\n      errorId.add(id)\n      if (errorMap.has(id)) {\n        // tslint:disable-next-line: semicolon    // tslint:disable-next-line: whitespace\n        ;(errorMap.get(id) as IProcessedError).message = (errorMap.get(\n          id,\n        ) as IProcessedError).message.concat(errorMsg)\n      } else {\n        errorMap.set(id, {\n          id,\n          name: content.name || 'Untitled Content',\n          message: errorMsg,\n        })\n      }\n    }\n  }\n}\n"],"sourceRoot":"webpack:///"}